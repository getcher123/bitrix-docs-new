# Алгоритм работы режима реального времени

Режим реального времени реализован таким образом, что в учетной системе постоянно висит один сеанс, который ждет статус ответа от сервера. На сайте создали или отредактировали документ - учетная система получает успешный статус ответа от сервера ( код 200), что является сигналом к началу обмена. Каждые 40 сек. соединение с сайтом обрывается и происходит его пересоединение.

Краткая схема работы режима реального времени:

![image](../images/0b0ae9ae2d.png)

При авторизации на сайте к адресу сайта добавляется параметр **"?type=listen"**. Т.е. адрес сайта получается: `<АдресСайта> + "?type=listen"`. Параметр необходим, чтобы сайт знал, что это соединение для режима реального времени.

Сайт может вернуть 2 кода состояния:


- Если это код **200**, значит надо выполнить обмен с сайтом.
- Если **302**, то нужно сделать переадресацию и снова посмотреть код состояния. Адрес переадресации берется из заголовка **Location**.
