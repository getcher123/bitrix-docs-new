# onCallEnd

Событие вызывается при окончании разговора (запись в историю).


#### В событие поступает массив с данными:


| Параметр | Описание |
| --- | --- |
| CALL_ID | Идентификатор звонка. |
| CALL_TYPE | Тип вызова (см. [описание типов вызова](../codes_and_types.md#call_type)). |
| PHONE_NUMBER | Номер, с которого звонит абонент (если тип звонка 2 - Входящий) или номер, которому звонит оператор (если тип звонка 1 - Исходящий). |
| PORTAL_NUMBER | Номер на который поступил звонок (если тип звонка 2 - Входящий) или номер, с которого был совершен звонок (если тип звонка 1 - Исходящий). |
| PORTAL_USER_ID | Идентификатор ответившего оператора (если тип звонка 2 - Входящий) или идентификатор позвонившего оператора (если тип звонка 1 - Исходящий). |
| CALL_DURATION | Длительность звонка. |
| CALL_START_DATE | Объект Bitrix\Main\Type\DateTime. |
| COST | Стоимость звонка. |
| COST_CURRENCY | Валюта звонка (RUR, USD, EUR). |
| CALL_FAILED_CODE | Код вызова (см. [таблицу кодов вызова](../codes_and_types.md#call_failed_code)). |
| CALL_FAILED_REASON | Текстовое описание кода вызова (латиница). |

<h4>Пример</h4>

<pre class="syntax" rel="example">


</pre>

<h4>Запрос:</h4>
<pre class="syntax">

</pre>


<h4>Ответ:</h4>
<pre class="syntax">

</pre>
