# CCatalogDiscount


#### Методы класса


| Метод | Описание | С версии | До версии |
| --- | --- | --- | --- |
| Add | Метод добавляет новую скидку в соответствии с данными из массива arFields. | 4.0.4 |  |
| Delete | Метод удаляет скидку с кодом ID. | 4.0.4 |  |
| SetCoupon | Метод добавляет код купона *coupon* в массив доступных для получения скидки купонов текущего покупателя. Система вычисляет минимальную для данного покупателя цену товара с учётом всех его скидок и купонов. | 4.0.4 | 12.0.0 |
| GetCoupons | Метод возвращает массив доступных для получения скидки купонов текущего покупателя. Система вычисляет минимальную для данного покупателя цену товара с учётом всех его скидок и купонов. | 4.0.4 | 12.0.0 |
| ClearCoupon | Метод очищает возвращает массив доступных для получения скидки купонов текущего покупателя. Система вычисляет минимальную для данного покупателя цену товара с учётом всех его скидок и купонов. | 4.0.4 | 12.0.0 |
| GetDiscountByPrice | Метод вычисляет скидку на цену с кодом productPriceID товара для пользователя, принадлежащего группам пользователей arUserGroups. | 4.0.4 |  |
| GetDiscountByProduct | Метод вычисляет скидку на товар с кодом productID для пользователя, принадлежащего группам пользователей arUserGroups. | 4.0.5 |  |
| GetByID | Метод выбирает параметры скидки по ее коду ID. | 4.0.4 |  |
| GetList | Метод возвращает результат выборки записей скидок в соответствии со своими параметрами. | 4.0.4 |  |
| GetDiscountGroupsList | Метод возвращает результат выборки записей с информацией о привязке скидок к группам пользователей в соответствии со своими параметрами. | 4.0.4 |  |
| GetDiscountCatsList | Метод возвращает результат выборки записей с информацией о привязке скидок к типам цен в соответствии со своими параметрами. | 4.0.4 |  |
| GetDiscountProductsList | Метод возвращает результат выборки записей с информацией о привязке скидок к товарам в соответствии со своими параметрами. | 4.0.4 | 12.0.0 |
| GetDiscountSectionsList | Метод возвращает результат выборки записей с информацией о привязке скидок к группам товаров в соответствии со своими параметрами. | 4.0.4 | 12.0.0 |
| Update | Метод изменяет параметры скидки с кодом ID в соответствии с данными из массива arFields. | 4.0.4 |  |

**Примечание:**С версии 12.0.0 в связи с изменением логики работы модуля считаются устаревшими следующие методы: - GetDiscountIBlockList - GetDiscountSectionsList - GetDiscountProductsList До выхода версии 12.0.0 все вышеперечисленные методы являлись служебными и позволяли получить **явно** заданные привязки скидки к инфоблоку, разделу, элементу. То есть данные, которые можно было увидеть в форме редактирования скидки. Использование этих методов для получения ID элементов, на которые могла подействовать скидка, было и является некорректным. Например, для скидки, у которой задано ограничение на раздел, вызов GetDiscountProductsList вернет пустой массив. С выходом 12.0 эти методы оставлены лишь для сохранения совместимости. Они могут вернуть привязки лишь к тем инфоблокам, разделам, элементам, которые явно заданы в ограничениях. Т.е. если скидка действует на название элемента, все перечисленные методы вернут пустые массивы.
