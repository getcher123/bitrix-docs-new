# Структура таблиц модуля форумов


### Группы форумов


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID группы форумов. Уникален. | Int | Да |  |
| SORT | Индекс сортировки. | Int | Да | 150 |


#### Сайтозависимые параметры групп форумов


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| FORUM_GROUP_ID | ID группы форумов | Int | Да |  |
| LID | Код сайта | Char(2) | Да |  |
| NAME | Название группы форумов | String(255) | Да |  |
| DESCRIPTION | Описание группы форумов | String(255) | Нет |  |



---
### Форумы


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID форума. Уникален. | Int | Да |  |
| NAME | Название форума | String(128) | Да |  |
| DESCRIPTION | Описание форума | String(255) | Нет |  |
| SORT | Индекс сортировки | Int | Да | 150 |
| ACTIVE | Активность форума (Y\|N) | Char(1) | Да | Y |
| ALLOW_HTML | Разрешить вводить в качестве сообщения произвольный HTML (Y\|N) | Char(1) | Да | N |
| *ALLOW_NL2BR* | Преобразовывать переводы каретки в тег <br> в режиме HTML (Y\|N) | Char(1) | Да | N |
| ALLOW_ANCHOR | Разрешить использовать в сообщениях тег <a> / [a] (Y\|N) | Char(1) | Да | Y |
| ALLOW_BIU | Разрешить использовать в сообщениях теги <b> / [b], <i> / [i], <u> / [u] (Y\|N) | Char(1) | Да | Y |
| ALLOW_IMG | Разрешить использовать в сообщениях тег <img> / [img] (Y\|N) | Char(1) | Да | Y |
| ALLOW_LIST | Разрешить использовать в сообщениях тег списка <ul> / [list] (Y\|N) | Char(1) | Да | Y |
| ALLOW_QUOTE | Разрешить использовать в сообщениях тег цитирования <quote> / [quote] (Y\|N) | Char(1) | Да | Y |
| ALLOW_CODE | Разрешить использовать в сообщениях тег кода <code> / [code] (Y\|N) | Char(1) | Да | Y |
| ALLOW_FONT | Разрешить использовать в сообщениях тег <font> / [color], [font] (Y\|N) | Char(1) | Да | Y |
| ALLOW_SMILES | Разрешить использовать в сообщениях смайлики в виде изображений (Y\|N) | Char(1) | Да | Y |
| ALLOW_UPLOAD | Разрешить загрузку файлов, привязанных с сообщениям форума. Возможные значения: N - загрузка запрещена, Y - только файлы изображений, F - файлы с заданными в поле ALLOW_UPLOAD_EXT расширениями, A - любые файлы. | Char(1) | Да | N |
| MODERATION | Премодерируемость форума (Y\|N) | Char(1) | Да | N |
| ORDER_BY | Сортировка "по умолчанию" тем форума в списке тем. Возможные значения: T - заголовок темы, N - количество сообщений в теме, A - автор темы, V - количество просмотров темы, D - дата создания темы, P - дата последнего сообщения в теме. | Char(1) | Да | P |
| ORDER_DIRECTION | Направление сортировки "по умолчанию" тем форума в списке тем. Возможные значения: ASC - прямой порядок, DESC - обратный порядок. | Char(4) | Да | DESC |
| TOPICS | Количество опубликованых тем в форуме. | Int | Да | 0 |
| POSTS | Количество опубликованых сообщений в форуме. | Int | Да | 0 |
| LAST_POSTER_ID | Код автора (код пользователя) последнего сообщения на форуме. | Int | Нет |  |
| LAST_POSTER_NAME | Имя автора последнего сообщения на форуме. | varchar(255) | Нет |  |
| LAST_POST_DATE | Дата последнего сообщения на форуме. | DateTime | Нет |  |
| LAST_MESSAGE_ID | ID последнего сообщения на форуме. | Int | Нет |  |
| ALLOW_UPLOAD_EXT | Список разделенных запятой расширений файлов, которые разрешены к загрузке. Применяется, если в поле ALLOW_UPLOAD стоит значение F. | String(255) | Нет |  |
| FORUM_GROUP_ID | Код группы, к которой принадлежит форум. | Int | Нет |  |
| ASK_GUEST_EMAIL | Спрашивать Email у незарегистрированого пользователя при написании сообщения (Y/N) | Char(1) | Нет | N |


#### Связь форума с сайтами


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| FORUM_ID | ID форума. | Int | Да |  |
| SITE_ID | Код сайта. | Char(2) | Да |  |
| PATH2FORUM_MESSAGE | Шаблон пути к сообщению на форуме. Может содержать подстроки #FORUM_ID#, #TOPIC_ID# и #MESSAGE_ID#, которые должны быть заменены на реальные код форума, код темы и код сообщения. | varchar(250) | Нет |  |


#### Темы форума


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID темы форума. Уникален. | Int | Да |  |
| TOPIC_ID | Указатель на тему-ссылку. Используется, если STATE=L. | bigint(20) | Нет |  |
| TITLE | Заголовок темы | String(70) | Да |  |
| TITLE_SEO | Информация для навигации | varchar(255) null | Нет |  |
| DESCRIPTION | Описание темы. | String(70) | Нет |  |
| TAGS | Теги темы. | varchar(255) | Нет |  |
| STATE | Состояние темы: открыта или закрыта (Y\|N). | Char(1) | Да | Y |
| USER_START_ID | Код автора темы. | Int | Нет |  |
| USER_START_NAME | Имя автора темы. | String(64) | Да |  |
| START_DATE | Дата создание темы. | DateTime | Да |  |
| ICON_ID | Код иконки темы. | Int | Нет |  |
| POSTS | Количество ответов на тему. | Int | Да | 0 |
| POSTS_UNAPPROVED | Количество неодобренных сообщений в теме. | int(11) | Нет | 0 |
| VIEWS | Количество просмотров темы. | Int | Да | 0 |
| FORUM_ID | ID форума, которому принадлежит тема. | Int | Да |  |
| APPROVED | Опубликована ли тема (Y\|N). Тема опубликована, если опубликовано хотя бы одно сообщение в ней. | Char(1) | Да | Y |
| SORT | Индекс сортировки темы | Int | Да | 150 |
| LAST_POSTER_ID | Код автора последнего сообщения в теме. | Int | Нет |  |
| LAST_POSTER_NAME | Имя автора последнего сообщения в теме. | varchar(255) | Да |  |
| LAST_POST_DATE | Дата последнего сообщения в теме. | DateTime | Да |  |
| LAST_MESSAGE_ID | ID последнего сообщения в теме | Int | Да |  |
| ABS_* | Четыре последних поля могут иметь указанную приставку. В этом случае их значения видны только модераторам. |  |  |  |



---
### Сообщения


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID сообщения. Уникальное. | Int | Да |  |
| AUTHOR_ID | Код автора сообщения. | Int | Нет |  |
| AUTHOR_NAME | Имя автора сообщения. | String(128) | Да |  |
| AUTHOR_IP | IP автора сообщения | String(128) | Нет |  |
| USE_SMILES | Пользователь хочет, чтобы смайлики заменялись графическими изображениями (Y\|N). | Char(1) | Да | Y |
| POST_DATE | Дата создания сообщения. | Datetime | Да |  |
| POST_MESSAGE | Текст сообщения. | Text | Да |  |
| FORUM_ID | ID форума, которому принадлежит сообщение. | Int | Да |  |
| TOPIC_ID | ID темы, которой принадлежит сообщение. | Int | Да |  |
| APPROVED | Сообщение опубликовано (Y\|N) | Char(1) | Да | Y |
| GUEST_ID | Код посетителя | Int | Нет |  |
| AUTHOR_REAL_IP | Реальный IP автора сообщения. | Int | Нет |  |
| ATTACH_IMG | Присоедененный файл. | Int | Нет |  |



---
### Профайл посетителя форума


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID профайла. Уникален. | Int | Да |  |
| USER_ID | ID пользователя. Уникален. | Int | Да |  |
| DESCRIPTION | Описание посетителя. | String(64) | Нет |  |
| IP_ADDRESS | IP адрес, с которого было отправлено последнее сообщение. | String(128) | Да |  |
| AVATAR | Аватар посетителя. Массив, описывающий файл, полученный, например, через **CFile::MakeFileArray** | Array | Нет |  |
| NUM_POSTS | Количество сообщений посетителя на форуме. | Int | Да | 0 |
| INTERESTS | Интересы посетителя (произвольная текстовая информация). | Text | Нет |  |
| LAST_POST | Код последнего сообщения постетителя. | Int | Нет |  |
| ALLOW_POST | Посетитель может писать сообщения (т.е. не забанен). | Char(1) | Да | Y |
| LAST_VISIT | Дата последнего посещения форума | DateTime | Да |  |
| DATE_REG | Дата регистрации на форуме | DateTime | Да |  |
| REAL_IP_ADDRESS | Настоящий IP адрес, с которого было написано последнее сообщение. | String(128) | Нет |  |
| SIGNATURE | Подпись посетителя. | String(255) | Нет |  |
| SHOW_NAME | Показывать имя и фамилию вместо логина (Y\|N) | Char(1) | Да | Y |
| HIDE_FROM_ONLINE | Не показывать пользователя в списке "Кто сейчас на сайте" (Y/N) | Char(1) | Нет | N |
| POINTS | Текущее количество баллов пользователя | Int | Нет | 0 |



---
### Звания (статусы) посетителей


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID звания. Уникален. |  | Да |  |
| MIN_POINTS | Количество баллов, которое необходимо иметь для получения этого звания. | Int | Да | 0 |
| CODE | Символьный код звания. | varchar(100) | Нет |  |
| VOTES | Количество голосов, которое пользователь в этом звании может отдать за другого пользователя | Int | Да | 0 |



---
### Языковые параметры званий


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| POINTS_ID | ID звания | Int | Да |  |
| LID | Код языка параметров | Char(2) | Да |  |
| NAME | Название звания | String(250) | Да |  |



---
### Карта соответствий сообщений/баллов

Карта соответствий между количеством сообщений пользователя на форуме и количеством баллов за сообщение.



| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Первичный ключ. | Int | Да |  |
| MIN_NUM_POSTS | Количество сообщений, которое нужно написать для получения этого количества баллов за сообщение. | Int | Да | 0 |
| POINTS_PER_POST | Количество баллов за сообщение. Может быть дробным числом (0.1 - балл дается за 10 сообщений) | decimal(18, 4) | Да | 0 |



---
### Смайлы и иконки


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID смайла. Уникален. |  | Да |  |
| TYPE | Тип: S - смайл, I - иконка. | Char(2) | Да | S |
| TYPING | Варианты написания смайлов, перечисленные через пробел. | String(100) | Да |  |
| IMAGE | Название файла изображения. | String(128) | Да |  |
| SORT | Индекс сортировки. | Int | Да | 150 |
| IMAGE_WIDTH | Ширина изображения. | Int | Да | 0 |
| IMAGE_HEIGHT | Высота изображения. | Int | Да | 0 |


#### Языковые параметры смайлов


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| SMILE_ID | ID смайла | Int | Да |  |
| LID | Код языка параметров | Char(2) | Да |  |
| NAME | Название смайла | String(255) | Да |  |



---
### Подписка


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID подписки | Int | Да |  |
| USER_ID | ID подписанного пользователя | Int | Да |  |
| FORUM_ID | Форум, на сообщения которого подписан | Int | Да |  |
| TOPIC_ID | Тема, на сообщения которой подписан | Int | Нет |  |
| START_DATE | Дата подписки | DateTime | Да |  |
| LAST_SEND | ID последнего отправленного сообщения | Int | Нет |  |
| NEW_TOPIC_ONLY | Подписка только на новые темы (Y/N) | Char(1) | Да | N |
| SITE_ID | ID сайта, на котором произведена подписка | Char(2) | Да | ru |



---
### Приватные сообщения


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID сообщения. Уникален. | Int | Да |  |
| AUTHOR_ID | ID автора сообщения. | Int | Да |  |
| USER_ID | ID получателя сообщения. | Int | Да |  |
| FOLDER_ID | ID папки пользователя. | Int | Да |  |
| IS_READ | Метка о прочтении. | Int | Да |  |
| USE_SMILES | Заменять смайлики графическими изображениями (Y\|N). | Int | Да |  |
| POST_DATE | Дата создания сообщения. | DateTime | Да |  |
| POST_SUBJ | Тема сообщения. | String(255) | Нет |  |
| POST_MESSAGE | Текст сообщения. | Text | Нет |  |



---
### Папки пользователя


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID папки. Уникален. | Int | Да |  |
| TITLE | ID автора сообщения. | String(50) | Да |  |
| USER_ID | ID владельца папки. | Int | Да |  |



---
### Словари


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| TITLE | Имя словаря. | String(50) | Да |  |
| TYPE | Тип словаря. | Char | Да |  |


#### Словарь букв


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| DICTIONARY_ID | ID словаря. | Int | Да |  |
| LETTER | Буква. | String(50) | Да |  |
| REPLACEMENT | Замена. | String(50) | Да |  |


#### Словарь слов


| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| DICTIONARY_ID | ID словаря. | Int | Да |  |
| WORDS | Слово. | String(255) | Нет |  |
| PATTERN | Шаблон. | String(255) | Нет |  |
| REPLACEMENT | Замена. | String(255) | Нет |  |
| DESCRIPTION | Описание. | Text | Нет |  |
| REPLACEMENT | Замена. | String(50) | Да |  |
| USE_IT | Задействован (Y\|N). | Char | Да |  |

---




| ![](../images/04b86fae09.jpg) 1 **Denis Sharomov**23.04.2012 17:37:16 |
| --- |
| Таблица b_forum_topic содержит дополнительное поле SOCNET_GROUP_ID, доступное через TOPIC_SOCNET_GROUP_ID. Где хранится ID группы соцсети. |
|  |


| ![](../images/f03aa24e00.jpg) 0 **Evgenius**15.12.2010 17:57:04 |
| --- |
| Для групп форумов забыли, что есть поле **PARENT_ID**. Без него никуда. |
|  |
