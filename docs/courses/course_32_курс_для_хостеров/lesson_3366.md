# Пример: число процессов веб-сервера

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 3365 — Настройка веб-сервера Apache](lesson_3365.md)
- [Следующий: 3367 — Настройка Front-end NGINX →](lesson_3367.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=32&LESSON_ID=3366

Как определить максимальное число процессов веб-сервера? Естественно, только опытным путем. При этом начальное значение можно подобрать достаточно просто - нужно посмотреть, сколько занимает процесс apache во время типового обращения к сайту:




- Зайдите в *Linux* и запустите команду `free`. Она покажет вам общий размер оперативной памяти и свободный размер:
  ```
  # free
               total       used       free     shared    buffers     cached
  Mem:        255676     224340      31336          0      33468      67964
  -/+ buffers/cache:     122908     132768
  Swap:       530136      51800     478336
  ```
  В примере показано, что в системе ~256 Мб памяти, ~500 Мб swap (виртуальная память на диске). Системной памяти занято ~120 мб, вся неиспользуемая память отдана под файловый кэш
- Наберите команду `top`
- Откройте любую страницу сайта, параллельно смотря значение в программе **top**. Вверху появится процесс с названием apache2:
  ```
    PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
  14687 bitrix    20   0  153m  45m  28m R  6.7 18.2   0:05.34 apache2
  ```
  В этом примере столбец **RES** как раз и показывает примерное количество памяти, выделяемое на один процесс. Таким образом, для типового сайта на *"1С-Битрикс: Управление сайтом"* - это около 50 Мб. Соответственно, параметр **MaxClients** выбран 4 исходя из соображения, что должна остаться память под операционную систему и работу СУБД.




Из этого примера видно, что для достаточно посещаемого сайта (не интернет-магазина) минимальные требования по памяти для веб-сервера (или VPS) – от 512 Мб. Для интернет-магазина с обменом с *1С* минимальный объем памяти на сервере или VPS должен быть не менее 1 Гб.
