# Настройка базы данных Oracle

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 3371 — Настройка базы данных MySQL](lesson_3371.md)
- [Следующий: 3373 — Пример-упражнение →](lesson_3373.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=32&LESSON_ID=3372

<!-- &lt;p&gt;Продукт &lt;i&gt;&laquo;1C-Битрикс: Управление сайтом&raquo;&lt;/i&gt; протестирован и успешно работает с &lt;i&gt;Oracle&lt;/i&gt; 9i и 10g. &lt;/p&gt;

&lt;p&gt;Использование Oracle в качестве базы данных позволяет значительно увеличить надежность системы и производительности при большой нагрузке. Архитектура Oracle позволяет практически полностью использовать ресурсы серверов, добиваясь при этом прекрасной интерактивности приложений, даже при работе с большими объемами данных, построении больших отчетов или большом числе одновременных соединений. Работа с Oracle также позволяет использовать самые разные варианты масштабирования интернет-проекта.&lt;/p&gt; -->




**Внимание!** С 1 января 2017 года прекращена поддержка продуктов *«1С-Битрикс»* на базах данных **Oracle Database** и **MS SQL Server**. Для установок, использующих эти БД, недоступны обновления и возможности новых релизов.

Урок в курсе оставлен для тех, кто использует установку с Oracle. Он не обязателен к изучению и его можно пропустить.




Общие рекомендации по настройке Oracle совпадают с рекомендациями Oracle по конфигурированию системы для уменьшения дисковых операций чтений, сортировки и перестроения.




Стоит обратить внимание на системные переменные управления памятью. Рекомендуется использовать до 60-80% оперативной памяти для кеширования данных за счет управления переменными:




```

db_cache_size
shared_pool_size
pga_aggregate_target

```




Начиная с версии Oracle 10, рекомендуется использовать **Automatic Shared Memory Management**:



- при установке БД, выбрать % ОЗУ, которая будет доступна БД в пределах 60-80% от ОЗУ сервера с помощью параметра **SGA_MAX_SIZE**
- во время эксплуатации БД количество памяти, доступное Oracle можно откорректировать (в большую или меньшую стороны) с помощью параметра **SGA_TARGET** без перезапуска БД. Индикатором правильности установки параметров управления памятью будет отсутствие дисковых операций **swap**, также имеет смысл контролировать общесистемный размер используемого **swap** пространства – не более 100 MB.




Для экономии места SGA (shared_pool) и уменьшения расходов процессорных ресурсов на разбор SQL-запросов, отличающихся только значениями констант, рекомендуется установить параметр

```
cursor_sharing = FORCE
```

 либо

```
cursor_sharing = SIMILAR
```

 отключив расчёт гистограмм для столбцов таблиц в параметрах сбора статистики:

```
begin dbms_stats.set_param( 'METHOD_OPT', 'FOR ALL COLUMNS SIZE 1'  ); end;
```




Если Oracle установлен на той же машине, что и веб-сервер, рекомендуется использовать протокол IPC (`PROTOCOL = IPC`) и (`KEY = EXTPROC`) для соединения с базой для исключения работы через IP-стек.




Если реализована двухуровневая схема обработки запросов с Front-end и Back-end и установлен параметр **MaxClients**, то можно без опасений использовать постоянные соединения между PHP и Oracle (Persistent connection), выполнив следующую установку в файле `/bitrix/php_interface/dbconn.php`:



```
 define("DBPersistent",true);
```





**Примечание**: Начиная с релиза *Oracle* 10g R2, возможно использование отложенных транзакций (Enhanced COMMIT) в случаях если бизнес-требования к проекту допускают возможную потерю данных нескольких последних транзакций. Использование отложенных транзакций существенно ускоряет проект, позволяет снять прямую зависимость от производительности дисковой подсистемы и существенно уменьшить время генерации страниц. Для использования этого механизма, необходимо установить параметр: `COMMIT_WRITE='BATCH,NOWAIT'`.
