# Удаление сайтов

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 22142 — Резервное копирование при многосайтовости](lesson_22142.md)
- [Следующий: 22522 — Страница ошибки 404 при многосайтовости →](lesson_22522.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=103&LESSON_ID=3442

### Что может помешать удалению сайта




Удаление сайта возможно только из Административного раздела со страницы **Список сайтов** (Настройки &gt; Настройки продукта &gt; Сайты &gt; Список сайтов). Перед удалением сайта необходимо удалить

			сущности

                    Сущность - любой конкретный или абстрактный объект в рассматриваемой предметной области.

В рамках  1С-Битрикс: Управление сайтом сущности - это инфоблоки, привязки разного вида, правила, скидки, валюты, форумы и прочее.

		, которые имеют отношение к удаляемому сайту (или снять привязку с них).




![](../../../images/courses/103/dev.1c-bitrix.ru/images/admin_start/admin_base/del_site.png)




В некоторых случаях зависимость - сложная, например, инфоблок имеет торговые предложения, которые сами по себе являются инфоблоком.




Если какие-то сущности невозможно удалить, сайт тоже не удаляется и система выведет ошибки. В коде ошибок, как правило, указывается класс или метод, по которому определяется где искать объект для удаления или отвязывания:




![Ошибка при удалении сайта](../../../images/courses/103/dev.1c-bitrix.ru/images/dev_full/multisite/error_deleting_site_11.png)





### Примеры ошибок, возникающих при удалении сайтов



<!-- &lt;p&gt;
	 &lt;iframe title="Удаление сайта" src="//www.youtube.com/embed/fSKnaJJX-xs?feature=oembed&rel=0" allowfullscreen="" width="853" height="480" frameborder="0"&gt;
	<br>
	&lt;/iframe&gt;
&lt;/p&gt; -->








| \| **Ошибка при удалении в CForumNew::OnBeforeLangDelete (forum)** \| Не удалён форум \|<br>\| --- \| --- \|<br>\| **Ошибка при удалении в CIBlock::OnBeforeLangDelete (iblock)** \| Не удалены инфоблоки. Привязанные инфоблоки могут находиться в разных типах инфоблоков. \|<br>\| **Ошибка удаления. Возможно есть ссылающиеся объекты.** \| Не удалены сущности, ссылающиеся на удаляемые объекты. Например, при удалении инфоблока, являющегося <br>торговым каталогом,<br>
<br>Для **удаления торгового каталога** нужно предварительно сделать его обычным инфоблоком,
<br>выполнив два действия:
<br>- убрать флажок в поле **Является торговым каталогом;**<br>- отвязать **Инфоблок торговых предложений.**<br>
<br>![](../../../images/courses/103/dev.1c-bitrix.ru/images/admin_start/admin_base/catalog_settings.png)
<br>не отвязаны инфоблоки, являющиеся торговыми предложениями для удаляемого инфоблока. \|<br>\| **Ошибка при удалении в CSalePersonType::OnBeforeLangDelete (sale)** \| Ошибка связана с наличием типов плательщиков привязанных к сайту. \|<br>\| **В заказах используется тип плательщика с ID=*** \| Не удалены заказы, относящиеся к удаляемым типам плательщиков \|<br>\| **Ошибка при удалении в CRubric::OnBeforeLangDelete (subscribe)** \| Не удалены привязанные к сайту рассылки. \|<br>\| **Ошибка при удалении в модуле \Bitrix\Landing\Site::onBeforeMainSiteDelete (landing)** \| Нужно сначала удалить страницы соответствующего сайта в разделе Сайты24. \| |
| --- |





### Сущности, которые могут запретить удаление сайта




Список сущностей системы, имеющих привязку к сайтам и которые могут запретить удаление сайта:




- Инфоблоки (Контент&gt; Инфоблоки &gt; Типы инфоблоков &gt; Название инфоблока)
- Привязка одного инфоблока к другому в качестве торгового предложения. (Контент&gt; Инфоблоки &gt; Типы инфоблоков &gt; Название инфоблока, закладка **Торговый каталог**)
- Привязка одного инфоблока к другому в качестве источника для полей **Привязка к разделам** и **Привязка к элементам** и других. (Контент&gt; Инфоблоки &gt; Типы инфоблоков &gt; Название инфоблока, закладка **Свойства**)
- Страницы сайтов (Сайты &gt; Сайты 24 &gt; Название сайта &gt; Название страницы)
- Правила работы с корзиной (Маркетинг &gt; Товарный маркетинг &gt; Правила работы с корзиной &gt; Правила работы с корзиной)
- Скидки на товар (Маркетинг &gt; Товарный маркетинг &gt; Скидки на товар &gt; Скидки на товар)
- Накопительные скидки (Маркетинг &gt; Товарный маркетинг &gt; Накопительные скидки)
- Список рассылок Email-маркетинга (Маркетинг &gt; Email-маркетинг  &gt; Список рассылок)
- Список триггерных рассылок (Маркетинг &gt; Триггерные рассылки  &gt; Список рассылок)
- Настройка карты сайта (Маркетинг &gt; Поисковая оптимизация  &gt; Настройка sitemap.xml)
- Привязка баннеров (Маркетинг &gt; Баннерная реклама  &gt; Баннеры)
- Контракты (Маркетинг &gt; Баннерная реклама  &gt; Контракты)
- Заказы (Магазин &gt; Заказы либо Магазин &gt; Покупатели &gt; Список покупателей)
- Покупатели (Магазин &gt; Покупатели &gt; Список покупателей)
- Брошенные корзины пользователей (Магазин &gt; Покупатели &gt; Корзины)
- Склады (Магазин &gt; Складской учет &gt; Склады)
- Складские документы (Магазин &gt; Складской учет &gt; Документы)
- Службы доставки (Магазин &gt; Настройки &gt; Службы доставки)
- Платежная система (Магазин &gt; Настройки &gt; Платежные системы)
- Налоги (Магазин &gt; Настройки &gt; Налоги &gt; Список налогов)
- Привязка налоговых ставок к налогам (Магазин &gt; Настройки &gt; Налоги &gt; Ставки налогов)
- Типы плательщиков (Магазин &gt; Настройки &gt; Типы плательщиков)
- Аффилиаты (Магазин &gt; Аффилиаты &gt; Аффилиаты)
- Планы комиссий (Магазин &gt; Аффилиаты &gt; Планы)
- Пирамиды (Магазин &gt; Аффилиаты &gt; Пирамида)
- Группы опросов (Сервисы &gt; Опросы &gt; Дополнительно &gt; Группы опросов)
- Веб-формы (Сервисы &gt; Веб-формы &gt; Настройка форм)
- Выпуски рассылки (Сервисы &gt; Рассылки &gt; Выпуски)
- Подписчики (Сервисы &gt; Рассылки &gt; Подписчики)
- Список рассылок (Сервисы &gt; Рассылки &gt; Список рассылок)
- Справочники техподдержки (Сервисы &gt; Техподдержка &gt; Справочники &gt; Название справочника)
- Уровни техподдержки (Сервисы &gt; Техподдержка &gt; Уровни поддержки)
- Обращения (Сервисы &gt; Техподдержка &gt; Обращения)
- Группы блогов (Сервисы &gt; Блоги &gt; Группы блогов)
- Форумы (Сервисы &gt; Форумы &gt; Список форумов)
- Темы Социальной сети (Сервисы &gt; Социальная сеть &gt; Темы)
- Группы Социальной сети (Сервисы &gt; Социальная сеть &gt; Группы)
- Учебные курсы (Сервисы &gt; Обучение &gt; Курсы)
- Привязка Учебной группы к курсу (Сервисы &gt; Обучение &gt; Учебные группы)
- Почтовые ящики (Сервисы &gt; Почта &gt; Почтовые ящики)
- Почтовые сервисы (Сервисы &gt; Почта &gt; Почтовые сервисы)
- Создание Google Sitemap (Настройки &gt; Поиск &gt; Google Sitemap)
- Правила сортировки (Настройки &gt; Поиск &gt; Правила сортировки)
- Стоп-лист (Настройки &gt; Проактивная защита &gt; Стоп-лист)
- Облако 1С-Битрикс (Настройки &gt; Облако 1С-Битрикс &gt; Ускорение сайта CDN)
- Почтовые шаблоны (Настройки &gt; Настройки продукта &gt; Почтовые события &gt; Почтовые шаблоны)
- Правила обработки адресов (Настройки &gt; Настройки продукта &gt; Обработка адресов &gt; Правила обработки)





### Удаление сайтов при многосайтовости




Возможны 2 варианта:



1. Вы удаляете сайт, который не содержит ядро продукта.
  В этом случае нужно лишь удалить или снять привязку со всех объектов, которые имеют отношение к удаляемому сайту. Подсказки об оставшихся объектах или зависимостях система выведет как ошибки. Ликвидировав ошибки, вы снимете запрет и сайт удалится.
2. Вы удаляете сайт, который содержит ядро (к примеру, сайт s1) и на который настроены
  			симлинки
                      **Символьная ссылка**: (также симлинк от англ. Symbolic link, символическая ссылка) - cпециальный файл, для которого в файловой системе не хранится никакой информации, кроме одной текстовой строки. Эта строка трактуется как путь к файлу, который должен быть открыт при попытке обратиться к данной ссылке.
  [Подробнее о настройке симлинков...](lesson_287.md)
  		 с других сайтов, например, с сайта s2.
  В этом случае, нужно из папки основного (содержащего ядро) сайта s1 перенести папки ядра (`/bitrix`, `/local` и `/upload`, то есть все те папки, на которые настроены симлинки) в папку сайта s2, замещая симлинки. После переноса можно удалить папку сайта s1.

49

[Описание курса](/learning/course/index.php?COURSE_ID=103&INDEX=Y)

[назад Резервное копирование при многосайтовости](lesson_22142.md)
		                                        [Страница ошибки 404 при многосайтовости вперед](lesson_22522.md)



Новинки документации в соцсетях:




[https://vk.com/1c_bitrix_doc](https://vk.com/1c_bitrix_doc)




[https://www.youtube.com/channel/UCtugDnALPdpOISTVfA8Hmjw](https://www.youtube.com/channel/UCtugDnALPdpOISTVfA8Hmjw)




[https://rutube.ru/channel/23487950/](https://rutube.ru/channel/23487950/)




[https://t.me/bitrixdoc](https://t.me/bitrixdoc)



Курсы разработаны в компании [«1С-Битрикс»](https://dev.1c-bitrix.ru)
