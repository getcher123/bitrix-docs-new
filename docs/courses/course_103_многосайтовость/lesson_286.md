# Многосайтовость на одном домене

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 1675 — Как система различает сайты](lesson_1675.md)
- [Следующий: 287 — Многосайтовость на разных доменах →](lesson_287.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=103&LESSON_ID=286

### Введение





Принципиальная необходимость для многосайтовости на одном домене – разделение сайтов по подкаталогам, так, чтобы структура файлов не пересекалась. Каждый сайт должен быть размещен в отдельном подкаталоге внутри корневого каталога.




При этом возможно как создание равнозначных папок в структуре корневого каталога, так и создание папок второго сайта внутри директории первого. То есть, допустимы комбинации как вида:




- `/www/s1/`
- `/www/s2/`


 Так и комбинации вида:

- `/www/s1/`
- `/www/s1/s2`


 В учебном курсе рассматривается первый вариант, когда сайты расположены на одном уровне. При размещении их на разных уровнях вложенности действия аналогичны, просто меняются пути до второго сайта.



Система поставляется настроенной на многосайтовость на одном домене. Дополнительной настройки в файле **httpd.conf** веб-сервера

			Apache


Apache HTTP-сервер – свободный веб-сервер. Apache является кроссплатформенным ПО, поддерживает операционные системы Linux, BSD, macOS, Microsoft Windows, Novell NetWare, BeOS.


Основными достоинствами Apache считаются надёжность и гибкость конфигурации. Он позволяет подключать внешние модули для предоставления данных, использовать СУБД для аутентификации пользователей, модифицировать сообщения об ошибках и т. д.

[Подробнее](https://ru.wikipedia.org/wiki/Apache_HTTP_Server)...

		 не требуются, достаточно создать нужные папки и заполнить правильно поля в настройках сайтов.





### Настройка на многосайтовость на одном домене




При настройке многосайтовости на одном домене мы располагаем одним веб-сервером Apache, `DocumentRoot` которого настроен на каталог `/home/www/allsites`.




**Примечание:**


 Путь к корню сайта в файловой системе сервера задается в настройках веб-сервера, например:

- для *Apache* – в файле **httpd.conf** параметр `DocumentRoot`;
- для *IIS* – в свойствах сайта, закладка *Home Directory &gt; Local Path*.




Установим программный продукт *«1С-Битрикс: Управление сайтом»* в этот каталог.




Каждый сайт в первом способе конфигурации должен быть размещен в отдельном подкаталоге внутри единого каталога, например:




- `/home/www/allsites/s1/`
- `/home/www/allsites/s2/`






Имена каталогов **s1**, **s2** можно выбирать любыми, например, **shop** и **company**, или **en** и **de** соответственно. Возможен так же вариант, когда один из сайтов располагается в корневом каталоге (например, `/home/www/allsites/`), а второй – в подкаталоге (например, `/home/www/allsites/s2/`).





### Конфигурирование




Настройка сайтов выполняется в Административном разделе системы (Настройки &gt; Настройки продукта &gt; Сайты &gt; Список сайтов).




Выбираем "Изменить" параметры сайта №1 и указываем в них:




- **Название:** site1
- **Доменное имя:** оставить пустым
- **Папка сайта:** /s1/
- **Название сайта:** Корпоративный сайт компании "*Название компании*"
- **URL сервера:**www.site1.com/s1
- **Путь к корневой папке веб-сервера для этого сайта:** оставить пустым





В параметре **Папка сайта** необходимо указывать путь относительно корня к каталогу, в котором расположена *публичная часть*. А **Путь к корневой папке веб-сервера для этого сайта** не используется в данном способе настройки многосайтовости и должен быть пустым для всех сайтов.




Аналогично настроим параметры сайта №2:




- **Название:** site2
- **Доменное имя:** оставить пустым
- **Папка сайта:** /s2/
- **Название сайта:** Интернет-магазин компании "*Название компании*"
- **URL сервера:**www.site1.com/s2
- **Путь к корневой папке веб-сервера для этого сайта:** оставить пустым




**Примечание:**

Многосайтовость на одном домене на вебсервере

			IIS


IIS – проприетарный набор серверов для нескольких служб Интернета от компании Microsoft. IIS распространяется с Windows NT.


Основным компонентом IIS является веб-сервер, который позволяет размещать в Интернете сайты. IIS поддерживает протоколы HTTP, HTTPS, FTP, POP3, SMTP, NNTP.

[Подробнее](https://ru.wikipedia.org/wiki/Internet_Information_Services)...

		 реализуется подобно тому, как это делается для сервера *Apache*.
