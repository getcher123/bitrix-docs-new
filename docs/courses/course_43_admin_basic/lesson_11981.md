# Расширения (extensions)

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 2917 — Типовые ошибки и советы](lesson_2917.md)
- [Следующий: 12435 — Инструмент @bitrix/cli →](lesson_12435.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=11981

Тему урока можно изучить в новом формате — [в документации по Bitrix Framework](https://docs.1c-bitrix.ru/pages/framework/extensions.html). В ней улучшена структура, описание, примеры.

> **Расширение** (экстеншн, extension) — способ организации JS и CSS кода в продуктах *1С-Битрикс: Управление Сайтом* и *Битрикс24*.



### Расположение расширений

В продукте:

```

bitrix/js/<module>/<extension>
bitrix/modules/js/<module>/<extension>
local/js/<module>/<extension>
```

**Примечание**: в директории **bitrix** расположены только те экстеншны, которые поставляются с продуктами *1С-Битрикс: Управление Сайтом* и *Битрикс24*. Клиентские экстеншны должны располагаться в папке **local**.

### Структура

- myextension

  - src — исходные файлы
  - dist —
    			бандлы
    **Бандл** (bundle, комплект/набор) - это совокупность каких-либо программных данных (файлов), объеденных по какому-либо признаку. В данном случае бандлы — это обработанные и объединенные исходные файлы.
    		 для браузера
  - bundle.config.js — конфигурационный файл для сборщика
  - config.php — конфигурационный файл экстеншна
  - lang — локализации
  - test — тесты
  - @types — файлы *.d.ts

Обязательные элементы: src, dist, bundle.config.js, config.php.

Необязательные элементы (директории): lang, test, @types.

Если у вас установлен `@bitrix/cli`, то структуру расширения можно

			создать


Для создания расширения ("экстеншна"):

1) Перейдите в директорию **local/js/{module}**

2) Выполните команду `bitrix create`

3) Ответьте на вопросы мастера

[Подробнее](lesson_12435.md#creating_an_extension)...

		, выполнив команду `bitrix create`.

### Использование расширений

- **В PHP**
  ```
  \Bitrix\Main\UI\Extension::load('main.loader');
  ```
  Метод `\Bitrix\Main\UI\Extension::load` принимает в качестве параметра имя расширения, либо массив имен.
- **В JS**

1. Импорт экспортов расширения:
  ```
  import {Loader} from 'main.loader';
  ```
  Если вы хотите импортировать старое расширение (не поддерживающие import ES6, например, **main.date**), укажите импорт без экспорта расширения:
  ```
  import "main.date";
  ```
  Когда вы импортируете расширение в JS, сборщик автоматически добавляет это расширение как зависимость в **config.php**.
2. Отложенное подключение:
  ```
  import {Runtime} from 'main.core';
  Runtime.loadExtension('main.loader').then((exports) => {
      // Код, который использует `main.loader`
      // В `exports` будут все экспорты из `main.loader`
  });
  ```
  Отложенная загрузка может быть полезна когда ваш функционал используется на странице не сразу, а например только тогда, когда пользователь откроет попап или выполнит какое-нибудь действие.
