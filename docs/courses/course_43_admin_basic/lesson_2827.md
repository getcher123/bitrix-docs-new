# Простые и комплексные компоненты

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 4565 — Что такое компонент](lesson_4565.md)
- [Следующий: 2818 — Структура компонента →](lesson_2818.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=2827

Компоненты делятся на **простые** (одностраничные) и **комплексные** (многостраничные). Простой компонент реализует вывод на одной физической странице, доступной под конкретным URL. Комплексный же заменяет собой набор простых компонентов. Например, создание новостного раздела можно реализовать несколькими простыми компонентами, размещаемыми каждый на отдельной физической странице, а можно - одним комплексным, размещенным на одной физической странице.

С точки зрения структуры и способов подключения простые и комплексные компоненты похожи. Но с точки зрения функционирования они сильно отличаются.

#### Простые компоненты

**Простые**(обычные, одностраничные) компоненты создают какую-либо область на одной странице. Их удобно использовать, когда на одной странице требуется разместить данные из различных модулей (блоги и инфоблоки, например) или данные из разных инфоблоков (новости и каталог товаров). Для создания полного раздела новостей или каталога товаров пользоваться ими довольно неудобно: приходится создавать большое число статических страниц и следить за тем, чтобы они были корректно связаны друг с другом.

#### Комплексные компоненты

**Комплексные**(сложные, многостраничные) компоненты создают **разделы сайта**. Например, компонент каталога создает на сайте весь раздел каталога: список каталогов, список групп и страницы товаров. То есть, комплексный компонент состоит из набора динамических страниц при просмотре сайта, но из одной статической страницы на физическом уровне. Комплексные компоненты строятся на основе простых, используя их логику.

Преимущество комплексных компонентов состоит в автоматической компоновке параметров одностраничных компонентов и отсутствии необходимости их связывать.



**Комплексные компоненты разрешают следующие проблемы:**



- Отпадает необходимость создания большого числа статических страниц для размещения всех требуемых простых компонентов. Отпадает необходимость отдельно настраивать для каждого из них общие (пересекающиеся) свойства (например, тип инфоблока и инфоблок).
- Происходит установление сложных взаимосвязей между простыми компонентами. Например, нет необходимости для страницы со списком сообщений темы форума настраивать, как эта страница может указать на страницу списка тем форума, а как на страницу профиля посетителя.
- В компонент (даже с кастомизированными шаблонами вывода) можно добавить новую страницу. Например, если на форуме появится страница (простой компонент) по выводу 10 посетителей с самым высоким рейтингом, то эта страница станет доступной и в публичной части.
- Можно сменить шаблон вывода всего комплексного компонента одним действием, а не настраивать вывод каждого из простых компонентов.



Алгоритм работы комплексного компонента таков:

1. на основании действий посетителя сайта (например, переход по пунктам меню) комплексный компонент определяет, какая страница должна быть показана пользователю, и подключает свой шаблон компонента для этой динамической страницы;
2. шаблон страницы подключает обычные компоненты, автоматически настраивая необходимым образом их свойства;
3. обычные компоненты выполняют свою работу: запрашивают данные у ядра системы, форматируют их и выводят посетителю, а также предоставляют пользователю различные элементы управления (ссылки, формы, кнопки и т.п.);
4. пользователь с помощью каких-либо элементов управления, посылает новый запрос комплексному компоненту.

#### Пример

Рассмотрим упрощённый пример работы комплексного компонента новостей. Пусть у нас есть обычные компоненты: список новостей и детальной новости (последний принимает во входных параметрах код новости, которую нужно показать).

Раздел новостей можно организовать, например, разместив на странице **index.php** компонент списка новостей, а на странице **news.php** - компонент детальной новости. При этом у компонента списка новостей нужно настроить входные параметры так, чтобы он мог формировать ссылки на страницу детальной новости (с кодом новости), а у компонента детальной новости нужно настроить входные параметры так, чтобы он мог формировать ссылку на страницу списка новостей.

Чтобы задать ссылку на страницу детальной новости, нужно задать путь к этой странице, а так же название параметра, в котором будет передаваться код новости для показа. То же название параметра нужно задать и во входных параметрах компонента детальной новости, чтобы он знал, где брать код новости для показа. Даже в данном максимально упрощённом случае настройки не так просты. А если это набор из десятков компонентов форума?

Более удобной альтернативой для сборщика сайта будет использование комплексного компонента новостей. Его, например, можно просто установить на страницу **index.php**. Согласованием ссылок и параметров будет заниматься сам комплексный компонент. От разработчика сайта никаких дополнительных действий не потребуется.

Страницы шаблона комплексного компонента будут содержать подключение соответствующих обычных компонентов с правильной настройкой их входных параметров. Простые компоненты будут выполнять свои обычные функции: им все равно, кто их вызвал и зачем. Для них важна только правильная настройка их входных параметров.

Таким образом реализуется паттерн **MVC**:

- на комплексный компонент новостей (controller) приходит HTTP запрос (действия пользователя);
- controller проверяет, установлен ли через HTTP запрос код новости и подключает из своего шаблона страницу списка новостей или страницу детальной новости (view);
- эта страница, в свою очередь, подключает соответствующий обычный компонент, устанавливая при этом его входные параметры необходимым образом;
- обычный компонент выполняет свою работу: запрашивает данные у ядра (model), форматирует их и выводит посетителю, а также отображает элементы управления (ссылки, формы, кнопки и т.п.);
- пользователь с помощью элементов управления посылает новый HTTP запрос на controller;
- процедура повторяется по мере надобности.

|  |
| --- |

Список ссылок по теме:

- [Комплексный компонент на пальцах от Антона Долганина](http://dev.1c-bitrix.ru/community/webdev/user/11948/blog/4728/) (блог)
