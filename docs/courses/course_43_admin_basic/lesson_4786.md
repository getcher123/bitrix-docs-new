# Механизм управления показом с помощью ключевых слов

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 3406 — Типы рекламы](lesson_3406.md)
- [Следующий: 3414 — Использование прав доступа →](lesson_3414.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=4786

Управление показом баннеров с помощью ключевых слов является одной из форм таргетинга рекламы на сайте. Особенность данного метода заключается в том, что он позволяет организовать рекламную кампанию, направленную на четко определенную целевую группу пользователей сайта.

С помощью ключевых слов можно:

- организовать показ рекламы, нацеленный на конкретную группу пользователей сайта. Т.е. показывать рекламу на страницах, посещаемых преимущественно этими пользователями, или страницах, тематика которых может заинтересовать данную группу пользователей.
- ограничить показ рекламы на страницах сайта, например, исходя из того, насколько содержание рекламы связано с информацией, представленной на странице.

### Механизм управления

В целях управления показом рекламы для страниц используются два вида специальных ключевых слов:

- ключевые слова баннера;
- ключевые слова страниц сайта:

  - **желательные** (**desired**): если для страницы сайта заданы желательные ключевые слова, то для показа на данной странице будут доступны все баннеры, в наборе ключевых слов которых содержится хотя бы одно желательное ключевое слово страницы.
  - **обязательные**(**required**): если для страницы сайта заданы обязательные ключевые слова, то для показа на данной странице будут доступны все баннеры, в наборе ключевых слов которых содержатся все обязательные ключевые слова страницы.



Если система не найдет баннеры, удовлетворяющие каким-либо из ключевых слов, то на странице будут показаны баннеры, для которых ключевые слова не заданы. Отбор и показ данных баннеров осуществляется при этом на основе стандартного алгоритма системы (разрешенных/запрещенных страниц контрактов и баннеров, групп пользователей, типов баннеров и других).

Общий порядок действий по организации показа баннеров на нужных страницах такой:

- Определяется, какая реклама будет доступна для показа на тех или иных страницах сайта.
- В соответствии с поставленными задачами для страниц сайта задаются наборы специальных ключевых слов.
- В настройках рекламных баннеров задается необходимый набор ключевых слов.

Ключевые слова баннеров задаются в поле **Ключевые слова** на странице создания/редактирования баннера, вкладка **Таргетинг** (Маркетинг &gt; Баннерная реклама &gt; Баннеры).

Управление желательными ключевыми словами страницы выполняется с помощью специального свойства `adv_desired_target_keywords`. Свойство станет доступно в форме настройки свойств страницы, если заранее [выполнить небольшие настройки](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=41&LESSON_ID=2843) модуля **Управление структурой**.

![](../../../images/courses/43/dev.1c-bitrix.ru/images/admin_expert/banners/page_property_desired_keywords.png)

Желательные ключевые слова страницы могут быть заданы с помощью функции [SetDesiredKeywords](/api_help/advertising/classes/cadvbanner/setdesiredkeywords.php) в коде страницы. Данная функция содержит следующие параметры:

- `keywords` – одно или несколько желательных ключевых слов страницы;
- `TYPE_SID` – тип рекламы, управление показом которой будет осуществляться с помощью указанных желательных ключевых слов. Если данный параметр оставить пустым, то ключевые слова будут заданы для всех типов рекламы.

```
CAdvBanner::SetDesiredKeywords (array ("Partners", "Cooperation", "Company", "Contacts"), "RIGHT");
```

**Обратите внимание!** По умолчанию, если в коде страницы не установлено каких-либо ключевых слов для рекламы, считается что функция `SetDesiredKeywords` использует в качестве параметра значение свойства страницы `adv_desired_target_keywords`. Если оно не задано, то в качестве параметра функции используется значение свойства `keywords`.

Функция `SetDesiredKeywords` вызывается автоматически в момент сборки страницы, ее не нужно дополнительно вызывать в файле `header.php`, если нет необходимости переопределить ключевые слова для показа рекламы.

Обязательные ключевые слова страницы задаются с помощью предустановленной функции системы [SetRequiredKeywords](/api_help/advertising/classes/cadvbanner/setrequiredkeywords.php). Данная функция содержит следующие параметры:

- `keywords` – одно или несколько обязательных ключевых слов страницы;
- `TYPE_SID` – тип рекламы, управление показом которой осуществляется с помощью указанных обязательных ключевых слов. Если данный параметр оставить пустым, то ключевые слова будут заданы для всех типов рекламы.

```
CAdvBanner::SetRequiredKeywords (array("Partners", "Cooperation"), "RIGHT");
```

В приведенном примере для показа на странице будет доступен баннер, в наборе ключевых слов которого содержатся все обязательные ключевые слова (partners и cooperation), заданные для страницы.
