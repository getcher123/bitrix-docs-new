# Выборка, фильтрация и сортировка

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 3496 — Добавление, редактирование, удаление пользовательских полей и их значений](lesson_3496.md)
- [Следующий: 3439 — Как добавить поле к любому объекту →](lesson_3439.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=3483

Пользовательские поля можно использовать в ORM как обычные: выбирать, фильтровать, сортировать, обновлять. ORM подключит нужные таблицы и сохранит изменения.

В класс таблицы `MyTable` добавьте статический метод `getUfId()`. Он должен возвращать код сущности, для которой созданы пользовательские поля.

Например, если поля созданы для сообщений блога, верните `BLOG_POST`.

```
class MyTable extends \Bitrix\Main\ORM\Data\DataManager
{
    public static function getUfId()
    {
        return 'BLOG_POST';
    }

    // ...
}
```

Теперь можно фильтровать, сортировать и выбирать пользовательские поля.

```
$rows = MyTable::query()
    ->addSelect('UF_GRATITUDE')
    ->where('UF_GRATITUDE', '>', 50)
    ->addOrder('UF_GRATITUDE', 'DESC')
    ->fetchCollection()
;
```

ORM автоматически добавит JOIN к таблице пользовательских полей. Ничего писать вручную не нужно.

После получения коллекции объектов можно работать с пользовательскими полями через геттеры и сеттеры.

```
foreach ($rows as $row)
{
    $value = $row->getUfGratitude();
    $row->setUfGratitude($value + 50);
    $row->save();
}
```
