# Шаблон бизнес-процесса

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 13378 — Рекомендации по разработке](lesson_13378.md)
- [Следующий: 2130 — Бизнес-процесс →](lesson_2130.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=57&LESSON_ID=3465

|  | ### О шаблоне |
| --- | --- |




> **Шаблон бизнес-процесса** – это схема (программа), в которой задана одна точка входа, последовательность действий (шагов, этапов, функций), совершаемых в заданном порядке и направленных на достижение некоторой цели, а так же одна или несколько точек выхода, определяющих завершение выполнения.




Шаблон создается в специальном модуле **Дизайнер бизнес-процессов** с помощью визуального конструктора. Конструктор позволяет перетаскивать действия из панели инструментов на Основную рабочую область конструктора, создавая шаблон бизнес-процесса визуальным образом. Шаблон создается в виде блок-схемы, которая наглядно отображает логику работы бизнес-процесса.




В дистрибутив заложен ряд встроенных действий (англ. activities), которые могут быть использованы для выполнения работ общего назначения. Таких действий – несколько десятков. Есть действия, допускающие использование собственного скрипта или php-кода. Кроме того, при необходимости есть возможность создавать собственные действия и подключать их к бизнес-процессу.




Созданный шаблон бизнес-процесса может быть выполнен автоматически или вручную, в зависимости от настроек. В любое время может одновременно выполняться несколько экземпляров бизнес-процесса и система занимается управлением выполнения этих экземпляров, сохраняя и восстанавливая их состояние по требованию. Ведется лог каждого экземпляра бизнес-процесса для дальнейшего анализа работы схемы и корректировки ее под новые условия. Если вы запустили на исполнение бизнес-процесс, то он будет выполняться без связи с его шаблоном, поэтому если в процессе выполнения процесса вы решите изменить его, то это изменение не коснется уже запущенного ранее бизнес-процесса.




Во внутренней архитектуре бизнес-процесса шаблон бизнес-процесса представляется в виде многомерного массива, содержащего иерархию действий и значения их свойств. Именно с таким представлением шаблона бизнес-процесса работает API модуля **Бизнес-процессы**.




Пример простого массива, представляющего шаблон бизнес-процесса:




```
array(
	array(
		"Type" => "SequentialWorkflowActivity",
		"Name" => "SequentialWorkflowActivity1",
		"Properties" => array(),
		"Children" => array(
			array(
				"Type" => "SetFieldActivity",
				"Name" => "SetFieldActivity1",
				"Properties" => array("Field" => "XML_ID", "Value" => "В рассмотрении"),
			),
			array(
				"Type" => "IfElseActivity",
				"Name" => "IfElseActivity1",
				"Properties" => array(),
				"Children" => array(
					array(
						"Type" => "IfElseBranchActivity",
						"Name" => "IfElseBranchActivity1",
						"Properties" => array("FieldCondition" => array("CREATED_BY", "=", 1)),
						"Children" => array(
							array(
								"Type" => "SetFieldActivity",
								"Name" => "SetFieldActivity2",
								"Properties" => array("Field" => "XML_ID", "Value" => "Принят"),
							),
						),
					),
					array(
						"Type" => "IfElseBranchActivity",
						"Name" => "IfElseBranchActivity2",
						"Properties" => array(),
						"Children" => array(
							array(
								"Type" => "ApproveActivity",
								"Name" => "ApproveActivity1",
								"Properties" => array(
									"Users" => array(1),
									"ApproveType" => "all",
									"OverdueDate" => null,
									"Name" => "Проверьте запись",
									"Description" => "",
									"Parameters" => null,
								),
								"Children" => array(
									array(
										"Type" => "SetFieldActivity",
										"Name" => "SetFieldActivity3",
										"Properties" => array("Field" => "XML_ID", "Value" => "Принят"),
									),
									array(
										"Type" => "SetFieldActivity",
										"Name" => "SetFieldActivity4",
										"Properties" => array("Field" => "XML_ID", "Value" => "Отклонен"),
									),
								),
							),
						),
					),
				),
			),
		),
	),
)
```
