# Модификация данных

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 3814 — Вычисление значений выражений в параметрах действий](lesson_3814.md)
- [Следующий: 13640 — Коды подстановки сущностей →](lesson_13640.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=57&LESSON_ID=12407

Указанные нами параметры, переменные шаблона или поля документа возможно модифицировать с помощью специальных **модификаторов**, которые преобразуют данные.




### Список модификаторов




В таблице ниже собран список всех модификаторов с кратким примером записи. Модификатор добавляется через символ **&gt;** внутри фигурных скобок. Примеры использования модификаторов есть в этом уроке и в последующих.




| \| Модификатор \| Описание \|<br>\| --- \| --- \|<br>\| **printable** \| Преобразует значение в понятную пользователю строку. Подходит для данных любого типа данных.
<br>```<br>{=Variable:Variable1 > printable}<br>``` \|<br>\| **friendly** \| Для данных типа Пользователь. Выводит только имя и фамилию пользователя, без его ID и логина.
<br>```<br>{=Document:CREATED_BY > friendly}<br>``` \|<br>\| **name** \| Получает имя файла для полей типа Файл. С версии **20.100.0** модуля Бизнес-процессы.
<br>```<br>{=Variable:File > name}<br>``` \|<br>\| **server** \| Для данных типа Дата и Дата/время. Выводит дату/время в часовом поясе сервера.
<br>```<br>{=Variable:Datetime > server}<br>``` \|<br>\| **local** \| Для данных типа Дата и Дата/время. Выводит дату/время в часовом поясе пользователя.
<br>```<br>{=Variable:Datetime > local}<br>``` \|<br>\| **responsible** \| Для данных типа Дата и Дата/время. Выводит дату/время в часовом поясе Ответственного.
<br>```<br>{=Variable:Datetime > responsible}<br>``` \|<br>\| **publink** \| Для данных типа Файл. Создаёт публичную ссылку на файл. С версии **20.0.700** модуля Бизнес-процессы.
<br>```<br>{=Document:PROPERTY_MY_FILE > publink}<br>``` \|<br>\| **shortlink** \| Для данных типа Файл. Создаёт короткую ссылку на файл. С версии **20.0.700** модуля Бизнес-процессы.
<br>```<br>{=Document:PROPERTY_MY_FILE > shortlink}<br>``` \|<br>\| **src** \| Для данных типа Файл. Создаёт прямую ссылку на файл.
<br>**Важно:** использование в коробочных версиях продукта небезопасно.<br>
<br>```<br>{=Document:PROPERTY_MY_FILE > src}<br>``` \|<br>\| Модификаторы для <br>преобразования типов данных<br>Все возможности такого преобразования смотрите в таблице преобразования типов данных. \|  \|<br>\| **bool** \| Преобразует данные в **bool** (булевый тип).
<br>```<br>{=Variable:Variable1 > bool}<br>``` \|<br>\| **date** \| Преобразует данные в тип **date** (дата).
<br>```<br>{=Variable:Variable1 > date}<br>``` \|<br>\| **datetime** \| Преобразует данные в тип **datetime** (дата/время).
<br>```<br>{=Variable:Variable1 > datetime}<br>``` \|<br>\| **double** \| Преобразует данные в тип **double** (число).
<br>```<br>{=Variable:Variable1 > double}<br>``` \|<br>\| **int** \| Преобразует данные в тип **int** (целое число).
<br>```<br>{=Variable:Variable1 > int}<br>``` \|<br>\| **file** \| Преобразует данные в тип **file** (файл).
<br>```<br>{=Variable:Variable1 > file}<br>``` \|<br>\| **select** \| Преобразует данные в тип **select** (список).
<br>```<br>{=Variable:Variable1 > select}<br>``` \|<br>\| **string** \| Преобразует данные в тип **string** (строка).
<br>```<br>{=Variable:Variable1 > string}<br>``` \|<br>\| **text** \| Преобразует данные в тип **text** (текст).
<br>```<br>{=Variable:Variable1 > text}<br>``` \|<br>\| **user** \| Преобразует данные в тип **user** (пользователь).
<br>```<br>{=Variable:Variable1 > user}<br>``` \| |
| --- |






### Таблица преобразования типов данных




Для понимания, как можно преобразовывать типы данных мы подготовили специальную таблицу. В ней вы можете получить информацию о том, возможен ли перевод одно типа данных в другой. И если возможно, то каким будет результат.




| \| **Начальный/конечный** \| **bool <br>(Да/Нет)** \| **date <br>(Дата)** \| **datetime <br>(Дата/Время)** \| **double <br>(Число)** \| **int <br>(Целое число)** \| **file <br>(Файл)** \| **select <br>(Список)** \| **string <br>(Строка)** \| **text <br>(Текст)** \| **user <br>(Пользователь)** \|<br>\| --- \| --- \| --- \| --- \| --- \| --- \| --- \| --- \| --- \| --- \| --- \|<br>\| **bool (Да/Нет)** \| --- \| x \| x \| 1 или 0 \| 1 или 0 \| х \| х \| Y или N \| Y или N \| x \|<br>\| **date (Дата)** \| x \| --- \| по формату \| timestamp \| timestamp \| x \| x \| по формату \| по формату \| x \|<br>\| **datetime (Дата/Время)** \| x \| по формату \| --- \| timestamp \| timestamp \| x \| x \| по формату \| по формату \| x \|<br>\| **double (Число)** \| 0==N<br>
<br>		 !0==Y \| из timestamp \| из timestamp \| --- \| (int) \| x \| x \| (string) \| (string) \| user_&lt;ID&gt; \|<br>\| **int (Целое число)** \| 0==N<br>
<br>		 !0==Y \| из timestamp \| из timestamp \| (float) \| --- \| x \| x \| (string) \| (string) \| user_&lt;ID&gt; \|<br>\| **file (Файл)** \| x \| x \| x \| x \| x \| --- \| x \| x \| x \| x \|<br>\| **select (Список)** \| Y или N \| x \| x \| (float) \| (int) \| x \| --- \| (string) \| (string) \| user_&lt;ID&gt;<br>
<br>		 group_&lt;CODE&gt;<br>
<br>		 &lt;ID&gt; \|<br>\| **string (Строка)** \| Y или N \| strtotime \| strtotime \| (float) \| (int) \| x \| x \| --- \| (string) \| user_&lt;ID&gt;<br>
<br>		 group_&lt;CODE&gt;<br>
<br>		 &lt;ID&gt; \|<br>\| **text (Текст)**Y или Nstrtotimestrtotime(float) (int)xx(string)---
<br>		 user_&lt;ID&gt;<br>
<br>		 group_&lt;CODE&gt;<br>
<br>		 &lt;ID&gt;**** \|  \|  \|  \|  \|  \|  \|  \|  \|  \|  \|<br>\| **user (Пользователь)** \| x \| x \| x \| ID \| ID \| x \| x \| (string) \| (string) \| --- \| |
| --- |




**Примечание**: все выражения в тексте автоматически преобразуются в строку, при отсутствии дополнительных идентификаторов.




**Примечание**: при преобразовании типа **Список** в **Строку** или **Текст** берутся *значения списка*, при преобразовании **Списка** в **Список** - *ключи списка*. Для получения значения ключа списка используйте конвертирование, например: `{=Variable:Select > select}`.




**Важно**! Для версий модуля до 15.6.0 преобразование типов данных, в том числе и запрос печатной формы для значений, не имеющих таковой, возможно с помощью переменных и действия **PHP-код**.







### Примеры




#### printable



Для параметров и переменных шаблона, а так же полей документа используется модификатор `printable`, преобразующий значения в понятную пользователю строку.




Возьмем переменную типа **пользователь**. Результат, если значение переменной равно `Автор`:



```
{=Variable:user}                          author
{=Variable:user > printable}              Автор
```




Для поля документа или параметра такой вариант отображения может быть сразу доступен для вставки в форме **Вставка значения**.




Если же печатная форма не предусмотрена, то запросить вывод печатной формы от любого значения получится и вручную (для переменной, дополнительного результата и т.п.). Кроме того, можно использовать модификаторы одновременно. Например, для переменной типа Datetime добавляем printable с преобразованием типа данных в Date:



```
{=Variable:Datetime > date, printable} // перевод даты в печатную форму
```





```
{=Variable:string>date} // преобразование строки в дату
```




<!-- &lt;p&gt;Помимо printable можно использовать модификатор &lt;b&gt;(текст)&lt;/b&gt; для перевода содержимого полей, не предназначенных для печати, в текст. Примером такого поля является &lt;b&gt;Телефон&lt;/b&gt; в сущности CRM. Формат записи: &lt;code&gt;{{Телефон (текст)}}&lt;/code&gt;.&lt;/p&gt;

&lt;div class="learnin-post-text"&gt;
&lt;table class="learning-spoiler"&gt;
&lt;thead onclick="LearningInitSpoiler(this)"&gt;
&lt;tr&gt;&lt;th&gt;
&lt;div&gt;Пример модификации поля Телефон для вывода в комментарии в карточке Контакта&lt;/div&gt;
&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;
&lt;tbody style="display:none;" class="learning-spoiler"&gt;
&lt;tr&gt;&lt;td&gt;
&lt;p&gt;Используем действие Добавить комментарий в бизнес-процессе Контакта в CRM.&lt;/p&gt;

&lt;p&gt;В комментарии выберем через форму Вставка значения вывод содержимого поля &lt;b&gt;Телефон&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src="/images/admin_expert/bizproc/activities/phone_to_text_example_1.png"&gt;&lt;/p&gt;

&lt;p&gt;Проверим результат. Запустим БП для Контакта и увидим запись &lt;b&gt;Array&lt;/b&gt; в комментарии:&lt;/p&gt;

&lt;p&gt;&lt;img src="/images/admin_expert/bizproc/activities/phone_to_text_example_3.png"&gt;&lt;/p&gt;

&lt;p&gt;Это произошло из-за того, что поле не предназначено для печати. Модифицируем его, добавив &lt;b&gt;(текст)&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src="/images/admin_expert/bizproc/activities/phone_to_text_example_2.png"&gt;&lt;/p&gt;

&lt;p&gt;В результате номер в комментарии выведется верно:&lt;/p&gt;

&lt;p&gt;&lt;img src="/images/admin_expert/bizproc/activities/phone_to_text_example_4.png"&gt;&lt;/p&gt;

&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt; -->





#### friendly



Для данных типа **Пользователь** есть возможность преобразования в формат **friendly**. В таком случае выводится только имя и фамилия пользователя, без его ID и логина.



Пример: `{=Document:CREATED_BY}` &gt; **User_1**



`{=Document:CREATED_BY > printable}` &gt; **Иван Иванов [1]**



`{=Document:CREATED_BY > friendly}` &gt; **Иван Иванов**




#### name




С версии **20.100.0** модуля **Бизнес-процессы** добавлена возможность получить имя файла через модификатор **name** для полей типа **Файл**. Пример для переменной типа Файл:




```
 {=Variable:File > name} // вывод названия файла
```




#### server, local, responsible




Для преобразования даты в нужный часовой пояс используйте один из модификаторов: server, local, responsible.




Здесь напомним важный момент: отображаемое в публичной части продукта время всегда подстраивается под часовой пояс пользователя. Это означает, что даже при использовании модификаторов для заполнения полей через БП, значения в результате будут отображены в часовом поясе каждого конкретного пользователя.






#### Другие примеры




- [Примеры работы со ссылками](lesson_3817.md);
- [Примеры работы с датами](lesson_12840.md).
