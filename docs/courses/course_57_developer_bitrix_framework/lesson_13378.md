# Рекомендации по разработке

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 23030 — Общая информация для разработчиков](lesson_23030.md)
- [Следующий: 3465 — Шаблон бизнес-процесса →](lesson_3465.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=57&LESSON_ID=13378

Рассмотрим типовые ошибки разработчиков и возможности, о которых часто забывают.




### Запуск




Варианты запуска бизнес-процессов:



- **Ручной** – инициируется вручную пользователем из интерфейса;
- **Автоматический** – запускается сам при создании/изменении документа, также при работе роботов и триггеров CRM;
- **Запуск через Rest** –  метод [bizproc.workflow.start](https://dev.1c-bitrix.ru/rest_help/bizproc/bizproc_workflow_instance/bizproc_workflow_start.php), либо посредством создания/изменения документа аналогично автоматическому запуску;
- **Возобновление** – работа БП после паузы, либо запуск после какого-то события.




**Общий момент** для

			всех вариантов

                    Кроме роботов и триггеров на текущий момент. Сейчас они запускаются системой, но такой сценарий планируется изменить.

		 запуска БП: всегда есть пользователь, который запустил бизнес-процесс и он всегда доступен внутри этого БП.





### Калькулятор выражений




В модуле **Бизнес-процесс** есть полезный инструмент – **Калькулятор выражений**. С помощью функций калькулятора можно расширить стандартные возможности Бизнес-процессов.




Подробно у функциях калькулятора можно почитать в уроке [Функции калькулятора выражений](lesson_4912.md).


Рекомендуем посмотреть примеры по частым вопросам:

- [Вычисление значений выражений в параметрах действий](lesson_3814.md);
- [Модификация данных](lesson_12407.md);
- [Примеры работы с датами](lesson_12840.md);
- [Примеры работы со ссылками](lesson_3817.md).





### PHP в бизнес-процессах




Отметим основные ошибки тех, кто активно занимается кастомизацией на коробочных версиях:




| \| Хорошо \| Плохо \| Почему плохо \|<br>\| --- \| --- \| --- \|<br>\| `$this->GetVariable('Foo');` \| `{=Variable:Foo}` \| Не рекомендуется использовать выражение БП при построении кода PHP, т.к. его невозможно правильно заэкранировать. Например, есть пользователь добавит в переменную текст с кавычкой, то на выходе получим ошибка парсинга PHP, что приведет к фатальной остановке выполнения хита и БП зависнет. Поэтому лучше использовать стандартный API. \|<br>\| Не ориентироваться на контекст \| Использовать `$USER`, `$GLOBALS` и т.д. \| Использование глобальных переменных не рекомендуется. \|<br>\| Учитывать права доступа \| `$USER->Authorize();` \| Не рекомендуется повышать права доступа путем авторизации под другим пользователем. Например: вы решили для выполнения определенного действия авторизовать пользователя под ID администратора. Если БП остановится по какой-то причине, то у пользователя останутся права администратора. \|<br>\| Фильтровать данные извне \| `"SELECT FROM b_user WHERE ID = {=Variable:UserID}"` \| Использования запроса к БД без фильтрации данных позволяет злоумышленнику осуществить атаку на сайт с помощью SQL инъекции. \| |
| --- |




Также рекомендуется максимально использовать **стандартные** функции.
