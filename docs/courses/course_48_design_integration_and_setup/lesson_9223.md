# Ограничения системы обновлений и лицензии

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 9149 — Технические требования](lesson_9149.md)
- [Следующий: 9685 — Переход на PHP 8.х →](lesson_9685.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=48&LESSON_ID=9223

Рассмотрим возможные ограничения на работу продукта, связанные с системой обновлений и лицензией.





### Ограничение работы системы обновлений




Продукт *«Битрикс24»* в коробке постоянно обновляется, выпускаются новые функциональные возможности модулей, обновления для интерфейса, новые версии.




Обновление продукта выполняется по технологии SiteUpdate, которая позволяет без дополнительных расходов скачивать и устанавливать обновления без привлечения технических специалистов. Обновления не затрагивают публичную часть вашего сайта, не нарушают контент и полностью исключают потерю данных.




**Примечание.** Подробная информация по системе обновлений представлена в курсе [Установка и настройка](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=135&CHAPTER_ID=04745).




Чтобы иметь возможность устанавливать новые обновления, настройки вашего сервера должны удовлетворять следующим техническим требованиям:




- Должно быть установлено расширение PHP **mbstring**.
- Параметр `default_charset` в **php.ini** должен быть заполнен.
- Параметр `mbstring.internal_encoding` в **php.ini** должен быть пустым. Вместо него необходимо использовать параметр `default_charset`.
- Если установка работает в кодировке *UTF-8*, то параметр `default_charset` и результат вызова `mb_internal_encoding()` должны быть равны `UTF-8`.
- Если установка работает не в кодировке *UTF-8*, то параметр `default_charset` и результат вызова `mb_internal_encoding()` должны быть равны той кодировке, в которой работает установка.
- Если используется веб-сервер Apache, но в нем должен быть установлен модуль **mod_rewrite**.
- Версия PHP должна быть не ниже 8.1.





## Как настроить однобайтовую кодировку на CentOS 7

Самое главное – добавить `mb_internal_encoding('Windows-1251');` в файл `/bitrix/php_interface/dbconn.php`



Проверяем, правильно ли работает система:




```
var_dump(strtoupper("Москва"));
var_dump(mb_strtoupper("Москва"));
```



Результат выполнения команды:



```
string(6) "Москва"
string(6) "??????"
```



Видим ошибку. Проверяем, есть ли локаль *cp1251* в системе. Если ответ 0 – нет, если 1 - есть:



```
[root@sitemanager ~]# locale -a | grep ru_RU.cp1251 -ic
0
```



Добавляем локаль в систему:



```
[root@sitemanager ~]# localedef -c -i ru_RU -f CP1251 ru_RU.CP1251
```



Проверяем:



```
[root@sitemanager ~]# locale -a | grep ru_RU.cp1251 -ic
1
```



Перезагружаем веб-сервер:



```
[root@sitemanager ~]# systemctl restart httpd.service
```



Добавляем настройки в `/bitrix/php_interface/dbconn.php`:



```
setlocale(LC_ALL, 'ru_RU.CP1251' );
setlocale(LC_NUMERIC, 'C' );
mb_internal_encoding('Windows-1251');
```



Проверяем:



```
var_dump(strtoupper("Москва"));
var_dump(mb_strtoupper("Москва"));
```



Получаем правильный результат:



```
string(6) "МОСКВА"
string(6) "МОСКВА"
```






### Ограничения после окончания лицензии




Если вы решите не продлевать лицензию, то все обновления и поддержка продукта будут доступны до окончания срока действия активности лицензионного ключа. После окончания активности лицензии коробочная версия *«Битрикс24»* продолжит работать в режиме ограниченной лицензии без облачных сервисов, обновлений продукта и технической поддержки.




**Примечание.** С подробной информацией о том, какой функционал будет недоступен, вы можете ознакомиться в уроке [Ограниченная лицензия](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=135&LESSON_ID=12856).




Для возобновления полноценной работы *«Битрикс24»* нужно [продлить лицензию](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=135&LESSON_ID=25720).
