# Технические требования

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 15302 — Нагрузочное тестирование CRM 2022 года](lesson_15302.md)
- [Следующий: 9223 — Ограничения системы обновлений и лицензии →](lesson_9223.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=48&LESSON_ID=9149

### Веб-сервер, который может выполнять PHP приложения




**Apache** (рекомендуется) – система также успешно работает на версии 2.4.х.




**nginx** – требуется самостоятельная настройка для корректной работы. Версия – желательно последняя стабильная 1.16.х и выше.







### Требования к PHP



Для работы продукта минимальная версия PHP – 8.1.




Для корректной работы также требуется наличие следующих расширений PHP:




- **GD** – библиотека для работы с изображениями. Требуется для построения графиков и диаграмм для модулей статистики, рекламы, техподдержки. Используется для работы механизма CAPTCHA.
- **PHP XML** – используется для работы системы обновлений. Библиотека по умолчанию включена в стандартной установке PHP. Для версии под Windows - поддержка встроенная.
- **FreeType** – библиотека необходима для корректной работы механизма CAPTCHA.
- **Поддержка регулярных выражений** (POSIX и Perl-compatible) – необходима для корректной работы внутренних механизмов.
- **Zlib compression** – библиотека компрессии. Используется для работы модуля Компрессии и при работе системы обновлений для уменьшения количества передаваемых данных от сервера к клиенту.
- Крайне рекомендуется наличие **акселератора PHP** (OPcache, XCache, APC и другого). Рекомендуется **OPcache**, входит в состав PHP v5.5+.




**Внимание!** Особенности использования:


1. Прекомпилятор **XCache**: его параметр для корректной работы продукта должен быть выключен – `xcache.cacher = Off`.
2. **eAccelerator** не совместим с PHP v5.3+ и больше не поддерживается в продуктах «1C-Битрикс» с версии ядра 15.0.13. Подробнее см. в [блоге разработчиков](https://dev.1c-bitrix.ru/community/blogs/vad/the-end-of-support-for-eaccelerator.php).
3. Для базы данных MySQL доступна кодировка UTF-8. Для корректной поддержки кодировки UTF-8 необходимо проверить в настройках PHP **php.ini**, должно быть:
  ```
  mbstring.func_overload=0
  default_charset=UTF-8
  ```





## Дополнительные настройки PHP

Для корректной работы необходимо установить следующие параметры PHP:



- Объем памяти в байтах, который разрешается использовать для работы PHP ядру продукта (в данном случае - 256 МБ).
  ```
  memory_limit = 256M;
  ```
  Указанный параметр может быть изменен:

  - непосредственно в файле **php.ini**;
  - из скрипта с помощью функции: `ini_set("memory_limit", "256M");`;
    		Такая строка добавляется в файле `/bitrix/php_interface/dbconn.php` в момент установки, значение задается пользователем.
  - в файле **.htaccess** с использованием директивы: `php_value memory_limit 256M`;
    Установка параметров PHP из **.htaccess** возможна только при выполнении следующих условий:
      - используется веб-сервер Apache или совместимый с ним (IIS не является совместимым сервером);
      - файлы **.htaccess** обрабатываются веб-сервером, т.е. в настройках веб-сервера (**httpd.conf**) установлена директива: `AllowOverride All` или другое значение, отличное от `None`;
      - PHP установлен как модуль Apache (в случае, если PHP работает как CGI, все необходимые значения следует учесть и установить при сборке PHP).
  - в файле **httpd.conf** с использованием директивы: `php_admin_value memory_limit 256M`.
- Параметр определяющий возможность загрузки на сервер файлов.
  ```
  file_uploads = On;
  ```
  Дополнительно к указанному параметру устанавливаются значения следующих параметров:

  - `upload_tmp_dir = <имя каталога>`
    Необходимо, чтобы указанный каталог существовал и у него были права на запись для пользователя, под которым работает веб-сервер.
  - `upload_max_filesize = <достаточный размер>`
- Необходимо, чтобы была корректно настроена **работа с сессиями в PHP**. Рекомендуется проверить наличие пути для сохранения файлов сессий.
  Если параметр `session.save_path` не настроен в файле **php.ini**, то по умолчанию будет использовано значение `/tmp`.
  		В случае, если в параметрах URL на сервере появляется `PHPSESSID=...`, отключить его можно следующим образом:
  - В файле **php.ini** установить: `session.use_trans_sid = 0`
  - В файле **.htaccess** установить: `php_flag session.use_trans_sid off`
    		 Для демонстрационного сайта, строка включена в указанный файл, требуется только раскомментировать ее.
  **Важно!** C целью безопасности необходимо обязательно указывать отдельную папку хранения сессий для каждого пользователя хостинга.






### Поддержка баз данных




**MySQL.** Минимальным техническим требованием является использование версии MySQL 8.0. Рекомендуемая версия MySQL — 8.0 и выше.




Для работы с СУБД MySQL требуется установленная поддержка MySQL для PHP.




**PostgreSQL.** Только для лицензии Энтерпрайз. Установщик PostgreSQL может работать с версии 11, но рекомендуем устанавливать актуальную версию. Каждая версия PostgreSQL поддерживается в течение 5 лет, после чего поддержка прекращается. Ознакомьтесь с таблицей поддержки версий на сайте [PostgreSQL](https://www.postgresql.org/support/versioning/).




**Внимание!** Базы данных **Oracle** и **MSSQL** не поддерживаются.






### Место на жестком диске




Рекомендуется выделять как минимум 10ГБ на начальном этапе без учета ОС. В зависимости от количества документов места может потребоваться и больше, но 10ГБ – это минимум.






### Оперативная память




Минимум – 2 ГБ, лучше больше.







### Конфигурации серверов для коробки Битрикс24




Мы подобрали примерные конфигурации серверов с комфортным быстродействием:




- **До 50 пользователей**: Intel Xeon E3-1230v5 3.4 ГГц, 4 ядра / 2 × 2 ТБ HDD под файлы портала / 2 х 256 ГБ SSD под файлы базы данных / 16 ГБ DDR4.
- **50 – 100 пользователей**: Intel Xeon E3-1230v5 3.4 ГГц, 4 ядра / 2 × 2 ТБ HDD под файлы портала / 2 х 256 ГБ SSD под файлы базы данных / 24 ГБ DDR4.
- **100 – 500 пользователей**: Intel Xeon E3-1230v5 3.4 ГГц, 4 ядра / 2 × 2 ТБ HDD под файлы портала / 2 х 256 ГБ SSD под файлы базы данных / 32 ГБ DDR4.
- **500 – 1000 пользователей**: Intel Xeon E5-1650v4 3.6 ГГц, 6 ядер / 2 × 4 ТБ HDD под файлы портала / 2 х 480 ГБ SSD под файлы базы данных / 64 ГБ DDR4.
- **1000 – 5000 пользователей**: Intel Xeon E5-1650v4 3.6 ГГц, 6 ядер / 2 × 4 ТБ HDD под файлы портала / 2 х 480 ГБ SSD под файлы базы данных / 128 ГБ DDR4.
- **От 5000 пользователей**: 2 сервера Intel Xeon E5-1650v4 3.6 ГГц, 6 ядер / 2 × 4 ТБ HDD под файлы портала / 2 х 480 ГБ SSD под файлы базы данных / 128 ГБ DDR4.




Эти конфигурации примерные, и большинству проектов может потребоваться значительно меньше ресурсов. А кому-то, наоборот, может и не хватить.
