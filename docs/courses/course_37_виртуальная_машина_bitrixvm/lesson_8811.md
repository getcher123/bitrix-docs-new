# Установка «1С-Битрикс: Веб-окружение» - Linux (BitrixEnv)

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 11677 — Архив изменений](lesson_11677.md)
- [Следующий: 5099 — Словарь →](lesson_5099.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=37&LESSON_ID=8811

### Для кого?




*«1С-Битрикс: Веб-окружение» - Linux* (BitrixEnv) будет полезно:



- Для пользователей и разработчиков, которые использовали продукт *«1С-Битрикс: Виртуальная машина»* в процессе подготовки сайта и столкнулись с проблемой переноса конфигурации на хостинг или на невиртуальное оборудование и потерей производительности.
- Для специалистов хостинг-партнеров, планирующих создать шаблоны различных VPS для продуктов «1С-Битрикс».
- Для системных администраторов, которым требуется быстро подготовить производительную платформу для установки или миграции сайтов на основе «1С-Битрикс».
- Для программистов и системных администраторов, которым требуется быстро развернуть кластер для проектов на основе «1С-Битрикс».






*«1С-Битрикс: Веб-окружение» - Linux* позволяет быстро и с минимальными затратами развернуть оптимальное окружение для работы продуктов и решений «1С-Битрикс» на Linux-платформе **CentOS 7** (x86_64):




- mysql-server 5.7.x или 8.0.x
- web-server (Apache 2.4.*)
- php 8.x
- nginx 1.18.0
- memcached
- stunnel
- catdoc
- xpdf
- munin
- nagios
- sphinx






### Установка на CentOS 7




Рассмотрим установку *«1С-Битрикс: Веб-окружение» - Linux* на оборудовании с уже установленной **CentOS 7 (Minimal)** (x86_64).




1. Авторизуемся на сервер под административным аккаунтом **root** и обновляем все пакеты системы:
  ```
  yum clean all && yum update
  ```
2. Загружаем скрипт *«1С-Битрикс: Веб-окружение» - Linux* и запускаем его командами:
  ```
  wget https://repo.bitrix24.tech/yum/bitrix-env.sh && chmod +x bitrix-env.sh && ./bitrix-env.sh
  ```
  **Примечание**: Если на сервере нет утилиты для загрузки файлов **wget**, то ее можно установить командой `yum install wget`
  Далее необходимо согласиться на отключение **SELinux** (если SELinux включен в системе) и перезагрузить машину командой `reboot`:
  ![](../../../images/courses/37/dev.1c-bitrix.ru/images/bitrixvm/vmbitrix7/install/vm_install1_sm.png)
  После перезагрузки сервера снова продолжите установку *BitrixEnv*:
  ```
  ./bitrix-env.sh
  ```
  При первом входе на сервер с логином **root** будет предложено сменить пароль у пользователя **bitrix**:
  ![](../../../images/courses/37/dev.1c-bitrix.ru/images/bitrixvm/vmbitrix7/install/vm_install4_sm.png)
  Далее нужно создать пул ([1. Create Management pool of server](/learning/course/index.php?COURSE_ID=37&CHAPTER_ID=08817)) и можно приступать к работе:
  **Внимание!** В *VMBitrix* **версии 7.x+** нужно обязательно создать пул ([1. Create Management pool of server](/learning/course/index.php?COURSE_ID=37&CHAPTER_ID=08817)). Мастер создания пула откроет все необходимые порты в CentOS для корректной работы сервисов продуктов «1С-Битрикс»:
  - 22 – ssh доступ;
  - 80 / 443 – http / https web-сервер;
  - 8890 / 8891 – http/https ntlm;
  - 8893 / 8894 – http/https сервер мгновенных сообщений;
  - 5222 / 5223 – http/https xmpp-сервер.
  Если пул не создан, то открыты только 22, 80 и 443 порты.
  Внутри машины могут использоваться дополнительные порты для служб и сервисов, но они не открываются наружу.
  ![](../../../images/courses/37/dev.1c-bitrix.ru/images/bitrixvm/vmbitrix7/install/vm_install51_sm.png)
  Cервер готов для дальнейшего использования.
  После всех настроек сервера в целях безопасности не забудьте выйти из учетной записи **root**:
  - Выйти в консоль, выбрав в меню **0. Exit** (или нажать **Ctrl**+**C**)
  - И затем в консоли выполнить команду `exit`






### Тихая установка BitrixEnv




#### Silent mode




С версии 7.1 появилась возможность создания пула в «тихом» режиме, когда после установки окружения *VMBitrix* запускается сразу создание пула с нужным именем хоста и паролем для root MySQL.




```

./bitrix-env.sh [-s] [-p [-H hostname]] [-F] [-m mysql_version] [-M mysql_root_password]
```


где:

- `-s` – Тихий режим установки. Не задавать вопросы (Silent or quiet mode. Don't ask any questions).
- `-p` – Создать пул после установки окружения (Create pool after installation of bitrix-env).
- `-H` – Имя хоста (Hostname for for pool creation procedure).
- `-F` – Будет использоваться в качестве файрвола firewalld.
- `-I` – Будет использоваться в качестве файрвола iptables (по умолчанию).
- `-M` – Пароль root для MySQL (Mysql password for root user).
- `-m 5.7` – установить MySQL 5.7 (по умолчанию).
- `-m 8.0` – установить MySQL 8.0.




**Пример использования**:



Запустить установку окружения в «тихом» режиме, использовать файрвол firewalld, создать пул с именем хоста server1, MySQL 8.0 и задать пароль root пользователя MySQL - 111111.



```

./bitrix-env.sh -s -p -H server1 -F -m 8.0 -M '111111'
```




Узнать список всех ключей запуска установки можно командами для *VMBitrix* и *VMBitrix.CRM* соответственно:



```

./bitrix-env.sh -h
./bitrix-env-crm.sh -h
```






### Как управлять BitrixEnv





Для перехода к выполнению любого действия в меню виртуальной машины введите число и нажмите **Enter**. Например, для настройки локального виртуального сервера в строке наберите **2** (**Manage localhost**) и нажмите **Enter**.




Чтобы вернуться из командной строки (если нажали **0. Exit** или **Ctrl+C**) обратно в меню *VMBitrix*, введите в консоли команду:




```

/root/menu.sh
```






### Работа с файлами в BitrixEnv





Работа с файлами в *VMBitrix* осуществляется по протоколам **SSH / SFTP**. Протоколы FTP и SCP по умолчанию не поддерживаются.
