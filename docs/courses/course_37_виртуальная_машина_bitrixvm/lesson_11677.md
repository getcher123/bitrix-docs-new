# Архив изменений

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 13310 — Добавление и удаление сервера в пуле](lesson_13310.md)
- [Следующий: 8811 — Установка «1С-Битрикс: Веб-окружение» - Linux (BitrixEnv) →](lesson_8811.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=37&LESSON_ID=11677

История стабильных версий VMBitrix v 7.*.*






### VMBitrix v7.4.х (Стабильная версия)







## Список изменений v7.4.4 (ноябрь 2020)

**Основные исправления:**

– Удалена устаревшая опция PHP `mbstring.func_overload`.

Обновления главного модуля (main 20.100.0) требует удаления опции `mbstring.func_overload`. Эта опция более не требуется и не поддерживается платформой.



> На данный момент эту версию можно получить только через [обновление](lesson_8839.md) виртуальной машины












## Список изменений v7.4.3 (ноябрь 2019)

**Обновление ПО:**

– php 7.2

– nginx 1.16.1




**Основные исправления:**

– PHP 7.2 используется по умолчанию.

– В сборку nginx добавлен модуль Brotli (только для CentOS 7).

– Исправлена ошибка обновления образов для VirtualBox (процесс зависал из-за ошибки в MySQL).

– Исправлена ошибка в фразе при попытке установить окружение sh-скриптом на CentOS 8.










## Список изменений v7.4.2 (октябрь 2019)

**Основные исправления:**

– Изменен сервер выдачи сертификатов для Let's Encrypt, переход на версию API v2. API v1 будет окончательно отключен Let's Encrypt-ом 31 октября 2019.








## Список изменений v7.4.1 (август 2019)

**Основные исправления:**

– Исправлена ошибка определения статуса службы mysql на CentOS 6 в случае, если init.d-скрипт называется mysql.

– Исправлена ошибка обновления ssl-сертификата в случае предоставления цепочки.

– Исправлена ошибка обновления файла `ssl_options.conf` для службы nginx при обновлении пакета.









## Список изменений v7.4.0 (июль 2019)

**Обновление ПО:**

– nginx 1.16.0




**Основные исправления:**

– nginx обновлен до версии 1.16.0, добавлена поддержка TLS 1.3.

– В сборку nginx добавлен модуль PageSpeed (только для CentOS 7).

– Обновлены настройки сайтов в связи с deprecated-опцией `ssl on` для nginx версии 1.16.0 и выше.

– Для отдачи через nginx добавлены svg и woff2.

– Исправлено автоматической определение смены IP-адреса для сетевого интерфейса.

– Исправлена работа push-сервера после изменения IP-адреса машины.

– Исправлено поведение, при котором файл `resolv.conf` очищался при конфигурации сетевого интерфейса, если указать DNS-сервер.

– Исправлены некоторые фразы в меню виртуальной машины.

– Добавлена возможность обновить PHP до версии 7.2.

– Добавлено включение и выключение дополнительных модулей PHP в меню (curl, zip, dom, phar, xdebug, imagick).

– Исправлены конфигурационные файлы окружения - заменена устаревшая опция `mbstring.internal_encoding` для версии PHP 7.0 и выше.

– OpenVZ: исправлена установка и настройка виртуальной машины на OpenVZ-окружении.

– OpenVZ: исправлена ошибка запуска сервисов роли мониторинг на OpenVZ-окружении.

– Исправлена установка и настройка виртуальной машины на ОС, где полностью или частично отсутствуют iptables-модули.

– Добавлена возможность выбора межсетевого экрана для CentOS 7 при первоначальной установке с помощью sh-скриптов. Добавлены опции: `-F` будет использоваться firewalld, `-I` будет использоваться iptables. По умолчанию используется iptables.

– Исправлена ошибка пакета percona-release, возникающая при установке окружения sh-скриптом на чистый CentOS 6 или 7.

– Исправлена ошибка при обновлении машин, возникающая при обновлении пакета percona-release.

– Исправлена ссылка на пакет percona-release в задачах раздела MySQL.

– Добавлена возможность настроить и откатить ssl-сертификаты для push-сервера, настроенного с помощью nginx-push-stream-module.

– Исправлена процедура отката Lets Encrypt сертификата к начальному: сертификат удаляется для всех сайтов, на которых используется; удаляется его упоминание из настроек dehydrated.

– Исправлена процедура автопродления Lets Encrypt сертификатов.

– Исправлена работа NodeJS Push сервера для VMBitrix.CRM.

– Добавлена возможность включить и выключить мониторинг через меню в VMBitrix.CRM.

– Исправлены ошибки конфигурирования nagios и munin при включении мониторинга.

– Исправлено отображение данных и графиков нагрузки сервера для сервиса munin на CentOS 7.

– NTLM-настройки сайта теперь используют ssl-сертификат сайта в случаях: NTLM настроен, настраиваем ssl-сертификат сайта; ssl-сертификат сайта настроен, настраиваем NTLM.

– Исправлена процедура введения хоста в ActiveDirectory.

– Добавлена возможность использовать существующие NTLM-настройки для новых сайтов.

– Уменьшили максимальное количество ядер ОС с 5 до 3.

– Исправлено обновление конфигурации httpd при удаленном сайте по умолчанию.

– Исправлен запуск сервиса crond при установке окружения sh-скриптом на CentOS 6.

– Исправлена ошибка рассинхронизации времени в случае отсутствия файла `/etc/localtime`.

– Исправлена ошибка отсутствия меню настройки localhost в случае отсутствия настроенного сетевого интерфейса (IP-адреса).

– Исправлены ошибки в мастере включения Sphinx.

– Для сайта типа `link` наличие папки `images` у сайта типа `ext_kernel` теперь не обязательно.

– Virtual Hardware Version поднята до 12-ой версии в образах для VMWare и ESXi/vSphere.

– Исправлена ошибка работы образа для 5-го поколения машин в Amazon EC2.





**Примечание:**

iptables теперь будет всегда использоваться по умолчанию для новых установок и образов.



Если же у вас старый образ или установка до версии 7.4.0, то ничего не изменится: на CentOS 6 – iptables, на CentOS 7 – firewalld.



Если же у вас новая установка или образ:


1. **CentOS 6** (только VMBitrix)
  iptables был и остается межсетевым экраном по умолчанию на этой версии CentOS. Даже если принудительно пытаться ставить firewalld на CentOS 6 (команда `./bitrix-env-beta.sh -F`), то все равно будет установлен iptables.
2. **CentOS 7** (VMBitrix и VMBitrix.CRM)
  iptables будет новым межсетевым экраном по умолчанию. Запуск скрипта установки без параметров (`./bitrix-env-beta.sh` или `./bitrix-env-crm-beta.sh`) установит iptables.
  Если нужен firewalld, то нужно добавить параметр `-F` при установке пакета: `./bitrix-env-beta.sh -F` или `./bitrix-env-crm-beta.sh -F`.
3. **OpenVZ**
  Для OpenVZ-окружения возможно 4 типа работы сетевого экрана (он же netfilter): disabled, stateless, stateful, full.
  Использование firtewalld в OpenVZ stateful окружении зависит от модулей ядра, которые подключены в системе. В случае, если машина обнаружит ошибки запуска firewalld в stateful окружении, она включит принудительно iptables.
  Во всех остальных случаях будет использован iptables (stateless, disabled).




Обсуждение стабильной версии 7.4.x [на форуме](https://dev.1c-bitrix.ru/community/forums/forum32/topic122887/).






### VMBitrix v 7.3.х







## Список изменений v7.3.4 (декабрь 2018)

**Основные исправления:**


- Пакет push-server обновлен для корректной работы на CentOS 7.6. Исправлена ошибка запуска службы push-server через systemd.







## Список изменений v7.3.3 (сентябрь 2018)

**Основные исправления:**


- Добавлено автоматическое включение PHP-расширений zip и dom. Они стали обязательными, так как необходимы для работы модуля **Генератор документов (documentgenerator)**.








## Список изменений v7.3.2 (август 2018)

**Основные исправления:**


- Добавлена возможность включить и выключить yum-репозиторий, хранящий бета версии пакетов виртуальной машины.

- Исправлена опечатка в фразе меню, из-за которой не работало восстановление сертификата по умолчанию для сайта.










## Список изменений v7.3.1 (июль 2018)

**Обновление ПО:**

- push-server 2.0.0



**Основные исправления:**


- Исправлено отображение пунктов обновления MySQL и PHP, если версия MySQL сервера 5.5 и PHP обновлен до 7.0.

- Добавлено копирование цепочки сертификатов при настройке собственного ssl сертификата.

- Облегчена генерация dhparam.

- Исправлена блокировка работы меню при запущенном сценарии настройки.

- Исправлен выход из меню для нескольких пунктов.

- Исправлено поведение меню при включение мониторинга.











## Список изменений v7.3.0 (май 2018)

**Обновление ПО:**

- php 7.1 (устанавливается по умолчанию на новой виртмашине)

- nginx 1.14.0

- hostname 1.0.0



**Основные исправления:**


- Добавлено использование php версии 7.1 по умолчанию.

- Исправлена настройка сертификатов при настроенном https доступе к сайту.

- Исправления по настройкам пакета (опция в dbconn.php и зависимости от ethtool).




Обсуждение стабильной версии 7.3.x [на форуме](https://dev.1c-bitrix.ru/community/forums/forum32/topic108633/).







### VMBitrix v 7.2.х






## Список изменений v7.2.2 (декабрь 2017)

**Основные исправления:**

-- Исправили ошибку дублирования настроек ntlm для сервиса httpd-scale.









## Список изменений v7.2.1 (декабрь 2017)

**Основные исправления:**

-- Ошибка при создание сайта с указанием расширенных параметров (bitrix_utils.sh: line 160: read: `-r': not a valid identifier).

-- Фраза в настройках почты для сайта.







## Список изменений v7.2.0 (декабрь 2017)

**Обновление ПО:**

- nginx 1.12.2



**Основные исправления:**


WEB01: Добавлена поддержка установки сертификатов (собственных и Lets Encrypt) для сайтов типа kernel и link.

WEB02: Добавлена возможность вернуть "дефолтный" ssl сертификат сайта.

WEB03: Исправлены ошибки настройки web-кластера.

HOST01: Добавлена возможность изменения имени хоста после создания пула серверов.

MYSQL01: Исправлена процедура обновления настроек MySQL серверов в пуле.

SITE01: Фиксы безопасности для конфигурационных файлов nginx и httpd.

SITE02: Исправлены ошибки создания сайтов в случае, если на сервере нет ни одного рабочего сайта.

MONITOR01: Добавлено удаление серверов с мониторинга при их удаление из пула серверов.








Обсуждение версии 7.2.x [на форуме](https://dev.1c-bitrix.ru/community/forums/forum32/topic103555/).

2

[Описание курса](/learning/course/index.php?COURSE_ID=37&INDEX=Y)

[назад Что нового?](/learning/course/index.php?COURSE_ID=37&CHAPTER_ID=011219&LESSON_PATH=3908.13322.8809.11219)
		                                        [Установка «1С-Битрикс: Веб-окружение» - Linux (BitrixEnv) вперед](lesson_8811.md)



Новинки документации в соцсетях:




[https://vk.com/1c_bitrix_doc](https://vk.com/1c_bitrix_doc)




[https://www.youtube.com/channel/UCtugDnALPdpOISTVfA8Hmjw](https://www.youtube.com/channel/UCtugDnALPdpOISTVfA8Hmjw)




[https://rutube.ru/channel/23487950/](https://rutube.ru/channel/23487950/)




[https://t.me/bitrixdoc](https://t.me/bitrixdoc)



Курсы разработаны в компании [«1С-Битрикс»](https://dev.1c-bitrix.ru)
