# Конфигурация Nginx

**Навигация**
- [← Оглавление курса](index.md)
- [← Предыдущий: 20398 — Установка пакетов](lesson_20398.md)
- [Следующий: 20402 — Конфигурация PHP →](lesson_20402.md)

Официальная страница урока: https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=135&LESSON_ID=20400

Выполним конфигурацию Nginx.

- Рабочий каталог для сайта - `/var/www/html/bx-site`.
- Пользователь для web окружения - **_nginx/_webserver**.

Конфигурация nginx сервера:

```
/etc/nginx/nginx.conf                                       # основной конфигурационный файл
            |_conf.d/upstreams.conf                         # конфигурация для upstream серверов: apache && push-server
            |_conf.d/maps-composite_settings.conf           # переменные используемые для кеша
            |_conf.d/maps.conf                              # дополнительные переменные
            |_conf.d/http-add_header.conf                   # CORS заголовки
            |_sites-available/*.conf                        # подключаем сайты
                              |_default.conf                # сайт по умолчанию (настраиваем только 80 порт)
                                    |_conf.d/bx_temp.conf   # конфигурация BX_TEMPORARY_FILES_DIRECTORY
                                    |_conf.d/bitrix.conf    # дефолтная конфигурация сайта
                              |_rtc.conf                    # проксирование запросов на push-server (публикация)
```

Дефолтная конфигурация сайта:

```
conf.d/bitrix.conf                                          # основный блоки со включенным по умолчанию кешем в файлах
        |_conf.d/bitrix_general.conf                        # отдача статики, быстрая отдача для внешних хранилищ и прочее
                |_conf.d/errors.conf                        # обработка ошибок
                |_conf.d/im_subscrider.conf                 # проксирование запросов на push-server (получение)
                |_conf.d/bitrix_block.conf                  # блокировки по умолчанию
```

Конфигурация взята из виртуальной машины и может показаться избыточной, но фактически поддерживает все те же возможности, что и виртуальная машина.

Все конфигурационные файлы можно [скачать в архиве](/docs/chm_files/alt8.zip). Конфигурационные файлы для Nginx расположены в папке: `alt8/nginx`.

Разместите их в директории `/etc/nginx/`.

Для удобства, в конфигурационных файлах используются имена серверов httpd - **apache2**, сервис push **push-server**. По умолчанию они будут ставиться на локальную машину, поэтому прописываем следующие записи в `/etc/hosts`:

```
127.0.0.1 httpd push
```

Если Вы планируете развернуть данные сервисы на отдельных хостах, то нужно прописать правильный IP в `/etc/hosts` или сконфигурировать DNS сервер.

Запустите сервис:

```
systemctl --now enable nginx
```
