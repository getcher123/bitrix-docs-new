# Формы.Обратная связь

Источник: https://dev.1c-bitrix.ru/api_d7/bitrix/ui/feedback_form/index.php

### Вызов формы обратной связи

Для вызова формы обратной связи можно использовать js-расширение `ui.feedback.form`.

Для вызова необходимо вызвать статический метод `open` из пространства имен `BX.UI.Feedback.Form` и передать в качестве параметра объект:

```
<div
	class="sender-ui-tile-custom-list-item"
	style=""
	onclick="BX.UI.Feedback.Form.open(
		{
			id: Math.random()+'',
			forms: [
				{zones: ['en', 'eu', 'in', 'uk'], id: 986, lang: 'en', sec: 'bb83fq'},
				{zones: ['de'], id: 988, lang: 'de', sec: 'c59qtl'},
				{zones: ['la', 'co', 'mx'], id: 990, lang: 'es', sec: 'kqcqnn'},
				{zones: ['com.br'], id: 992, lang: 'br', sec: '74yrxg'},
				{zones: ['pl'], id: 994, lang: 'pl', sec: 'qtxmku'},
				{zones: ['ua'], id: 977, lang: 'ua', sec: '23hkre'},
				{zones: ['by'], id: 980, lang: 'by', sec: 'yfkacy'},
				{zones: ['kz'], id: 975, lang: 'kz', sec: 'z1ocbi'},
				{zones: ['ru'], id: 974, lang: 'ru', sec: 'flmbhs'},
				],
			}
		);"
>
</div>
```

### Параметры объекта

За дополнительные действия отвечают параметры компонента `bitrix:ui.form`.

| Параметр | Структура |
| --- | --- |
| id | Уникальный идентификатор формы на странице. Обязательный параметр. |
| portalUri | Базовая ссылка на портал который содержит форму. Необязательный. |
| title | Заголовок для слайдера, необязательный. По умолчанию проставляется заголовок Обратная связь. |
| forms | Описание форм для разных зон, из которого будет взята подходящая форма для текущей зоны. Массив настроек формы. Обязательный параметр. Включает в себя следующие параметры:<br><br>- `zones` — доменная зона, массив,<br>- `id` — идентификатор,<br>- `lang` — язык,<br>- `sec` — ключевая фраза. |
| presets | Дополнительные параметры, которые можно передать в скрытые поля формы. По умолчанию всегда дописываются следующие параметры:<br><br>- `b24_plan` — идентификатор тарифного плана Б24, если облако.<br>- `b24_plan_date_to` — дата окончания тарифного плана Б24.<br>- `b24_partner_id` — идентификатор партнера Б24, закрепленного за порталом.<br>- `c_name` — имя текущего пользователя, который заполнял форму.<br>- `c_email` — e-mail текущего пользователя, который заполнял форму.<br>- `hosturl` — URL портала, с которого заполнили форму.<br>- `hostname` — домен портала, с которого заполнили форму. |

### Прямой вывод компонента на страницу

Иногда форму нельзя открывать в слайдере. Например, в мобильном приложении или на лендинге. В таких случаях подключайте компонент напрямую — он отобразится сразу на странице.

**Пример подключения**

```
$APPLICATION->IncludeComponent(
	'bitrix:ui.feedback.form',
	'',
	[
		'ID' => 'intranet-invitation',
		'FORMS' => [
			['zones' => ['com.br'], 'id' => '259', 'lang' => 'br', 'sec' => 'wfjn1i'],
			['zones' => ['es'], 'id' => '257', 'lang' => 'la', 'sec' => 'csaico'],
			['zones' => ['de'], 'id' => '255', 'lang' => 'de', 'sec' => 'nxzhg1'],
			['zones' => ['ua'], 'id' => '251', 'lang' => 'ua', 'sec' => '3y1j08'],
			['zones' => ['ru', 'kz', 'by'], 'id' => '261', 'lang' => 'ru', 'sec' => 'sieyyr'],
			['zones' => ['en'], 'id' => '253', 'lang' => 'en', 'sec' => 'wg6548'],
		],
		'air' => true,
		'USE_UI_TOOLBAR' => 'Y',
		'VIEW_TARGET' => null,
		'INLINE' => true,
		'SHOW_TITLE' => 'N',
	]
);
```

Параметры `ID`, `FORMS`, `PRESETS`, `TITLE` и `PORTAL_URI` работают так, как при вызове через JavaScript. Форму выбирают по доменной зоне из массива `FORMS`.

Дополнительные настройки:

- `air` — если `true`, кнопка будет в легком «зефирном» стиле.
- `USE_UI_TOOLBAR` — если `Y`, кнопка появится в новом UI-тулбаре. Работает только с `air = true`.
- `VIEW_TARGET` — место, куда вставить кнопку. По умолчанию — в заголовок страницы. Укажите `null`, чтобы вставить компонент в то место, где он вызван.
- `INLINE` — если `true`, вместо кнопки сразу покажется форма.
- `SHOW_TITLE` — если `N`, заголовок над формой не отобразится. Заголовок можно задать через параметр `TITLE`.
